import{h as G,e as H,i as J,t as Y,w as Q,k as Z,r as ee}from"./web-CEgYv_nT.js";var re=(e=>(e[e.AggregateError=1]="AggregateError",e[e.ArrowFunction=2]="ArrowFunction",e[e.ErrorPrototypeStack=4]="ErrorPrototypeStack",e[e.ObjectAssign=8]="ObjectAssign",e[e.BigIntTypedArray=16]="BigIntTypedArray",e[e.AbortSignal=32]="AbortSignal",e))(re||{});function te(e){switch(e){case'"':return'\\"';case"\\":return"\\\\";case`
`:return"\\n";case"\r":return"\\r";case"\b":return"\\b";case"	":return"\\t";case"\f":return"\\f";case"<":return"\\x3C";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return}}function y(e){let r="",a=0,n;for(let s=0,i=e.length;s<i;s++)n=te(e[s]),n&&(r+=e.slice(a,s)+n,a=s+1);return a===0?r=e:r+=e.slice(a),r}var w="__SEROVAL_REFS__";function L(e,r){if(!e)throw r}var D=new Map,g=new Map;function B(e){return D.has(e)}function ae(e){return L(B(e),new Be(e)),D.get(e)}typeof globalThis<"u"?Object.defineProperty(globalThis,w,{value:g,configurable:!0,writable:!1,enumerable:!1}):typeof window<"u"?Object.defineProperty(window,w,{value:g,configurable:!0,writable:!1,enumerable:!1}):typeof self<"u"?Object.defineProperty(self,w,{value:g,configurable:!0,writable:!1,enumerable:!1}):typeof global<"u"&&Object.defineProperty(global,w,{value:g,configurable:!0,writable:!1,enumerable:!1});function V(e,r){for(let a=0,n=r.length;a<n;a++){let s=r[a];e.has(s)||(e.add(s),s.extends&&V(e,s.extends))}}function ne(e){if(e){let r=new Set;return V(r,e),[...r]}}function se(e){e(this.reason)}function ie(e){this.addEventListener("abort",se.bind(this,e),{once:!0})}function oe(e){return new Promise(ie.bind(e))}var K={[Symbol.asyncIterator]:0,[Symbol.hasInstance]:1,[Symbol.isConcatSpreadable]:2,[Symbol.iterator]:3,[Symbol.match]:4,[Symbol.matchAll]:5,[Symbol.replace]:6,[Symbol.search]:7,[Symbol.species]:8,[Symbol.split]:9,[Symbol.toPrimitive]:10,[Symbol.toStringTag]:11,[Symbol.unscopables]:12},ue={0:"Error",1:"EvalError",2:"RangeError",3:"ReferenceError",4:"SyntaxError",5:"TypeError",6:"URIError"},t=void 0;function c(e,r,a,n,s,i,u,o,l,h,f,b){return{t:e,i:r,s:a,l:n,c:s,m:i,p:u,e:o,a:l,f:h,b:f,o:b}}function p(e){return c(2,t,e,t,t,t,t,t,t,t,t,t)}var O=p(2),k=p(3),ce=p(1),le=p(0),fe=p(4),pe=p(5),he=p(6),ye=p(7);function A(e){return e instanceof EvalError?1:e instanceof RangeError?2:e instanceof ReferenceError?3:e instanceof SyntaxError?4:e instanceof TypeError?5:e instanceof URIError?6:0}function de(e){let r=ue[A(e)];return e.name!==r?{name:e.name}:e.constructor.name!==r?{name:e.constructor.name}:{}}function T(e,r){let a=de(e),n=Object.getOwnPropertyNames(e);for(let s=0,i=n.length,u;s<i;s++)u=n[s],u!=="name"&&u!=="message"&&(u==="stack"?r&4&&(a=a||{},a[u]=e[u]):(a=a||{},a[u]=e[u]));return a}function W(e){return Object.isFrozen(e)?3:Object.isSealed(e)?2:Object.isExtensible(e)?0:1}function me(e){switch(e){case Number.POSITIVE_INFINITY:return pe;case Number.NEGATIVE_INFINITY:return he}return e!==e?ye:Object.is(e,-0)?fe:c(0,t,e,t,t,t,t,t,t,t,t,t)}function _(e){return c(1,t,y(e),t,t,t,t,t,t,t,t,t)}function be(e){return c(3,t,""+e,t,t,t,t,t,t,t,t,t)}function we(e){return c(4,e,t,t,t,t,t,t,t,t,t,t)}function ge(e,r){return c(5,e,r.toISOString(),t,t,t,t,t,t,t,t,t)}function ve(e,r){return c(6,e,t,t,y(r.source),r.flags,t,t,t,t,t,t)}function Se(e,r){let a=new Uint8Array(r),n=a.length,s=new Array(n);for(let i=0;i<n;i++)s[i]=a[i];return c(19,e,s,t,t,t,t,t,t,t,t,t)}function Ee(e,r){return c(17,e,K[r],t,t,t,t,t,t,t,t,t)}function Re(e,r){return c(18,e,y(ae(r)),t,t,t,t,t,t,t,t,t)}function ze(e,r,a){return c(25,e,a,t,y(r),t,t,t,t,t,t,t)}function xe(e,r,a){return c(9,e,t,r.length,t,t,t,t,a,t,t,W(r))}function Ae(e,r){return c(21,e,t,t,t,t,t,t,t,r,t,t)}function Ie(e,r,a){return c(15,e,t,r.length,r.constructor.name,t,t,t,t,a,r.byteOffset,t)}function $e(e,r,a){return c(16,e,t,r.length,r.constructor.name,t,t,t,t,a,r.byteOffset,t)}function Pe(e,r,a){return c(20,e,t,r.byteLength,t,t,t,t,t,a,r.byteOffset,t)}function Fe(e,r,a){return c(13,e,A(r),t,t,y(r.message),a,t,t,t,t,t)}function Oe(e,r,a){return c(14,e,A(r),t,t,y(r.message),a,t,t,t,t,t)}function ke(e,r,a){return c(7,e,t,r,t,t,t,t,a,t,t,t)}function Te(e,r){return c(28,t,t,t,t,t,t,t,[e,r],t,t,t)}function _e(e,r){return c(30,t,t,t,t,t,t,t,[e,r],t,t,t)}function Ce(e,r,a){return c(31,e,t,t,t,t,t,t,a,r,t,t)}function je(e,r){return c(32,e,t,t,t,t,t,t,t,r,t,t)}function Ue(e,r){return c(33,e,t,t,t,t,t,t,t,r,t,t)}function Me(e,r){return c(34,e,t,t,t,t,t,t,t,r,t,t)}var{toString:I}=Object.prototype;function Ne(e,r){return r instanceof Error?`Seroval caught an error during the ${e} process.
  
${r.name}
${r.message}

- For more information, please check the "cause" property of this error.
- If you believe this is an error in Seroval, please submit an issue at https://github.com/lxsmnsyc/seroval/issues/new`:`Seroval caught an error during the ${e} process.

"${I.call(r)}"

For more information, please check the "cause" property of this error.`}var Le=class extends Error{constructor(r,a){super(Ne(r,a)),this.cause=a}},De=class extends Le{constructor(r){super("parsing",r)}},S=class extends Error{constructor(r){super(`The value ${I.call(r)} of type "${typeof r}" cannot be parsed/serialized.
      
There are few workarounds for this problem:
- Transform the value in a way that it can be serialized.
- If the reference is present on multiple runtimes (isomorphic), you can use the Reference API to map the references.`),this.value=r}},Be=class extends Error{constructor(e){super('Missing reference for the value "'+I.call(e)+'" of type "'+typeof e+'"'),this.value=e}},Ve=class{constructor(e,r){this.value=e,this.replacement=r}},Ke={},We={},qe={0:{},1:{},2:{},3:{},4:{},5:{},6:{}};function Xe(e){return"__SEROVAL_STREAM__"in e}function $(){let e=new Set,r=[],a=!0,n=!0;function s(o){for(let l of e.keys())l.next(o)}function i(o){for(let l of e.keys())l.throw(o)}function u(o){for(let l of e.keys())l.return(o)}return{__SEROVAL_STREAM__:!0,on(o){a&&e.add(o);for(let l=0,h=r.length;l<h;l++){let f=r[l];l===h-1&&!a?n?o.return(f):o.throw(f):o.next(f)}return()=>{a&&e.delete(o)}},next(o){a&&(r.push(o),s(o))},throw(o){a&&(r.push(o),i(o),a=!1,n=!1,e.clear())},return(o){a&&(r.push(o),u(o),a=!1,n=!0,e.clear())}}}function Ge(e){let r=$(),a=e[Symbol.asyncIterator]();async function n(){try{let s=await a.next();s.done?r.return(s.value):(r.next(s.value),await n())}catch(s){r.throw(s)}}return n().catch(()=>{}),r}function He(e){let r=[],a=-1,n=-1,s=e[Symbol.iterator]();for(;;)try{let i=s.next();if(r.push(i.value),i.done){n=r.length-1;break}}catch(i){a=r.length,r.push(i)}return{v:r,t:a,d:n}}async function Je(e){try{return[1,await e]}catch(r){return[0,r]}}var Ye=class{constructor(r){this.marked=new Set,this.plugins=r.plugins,this.features=47^(r.disabledFeatures||0),this.refs=r.refs||new Map}markRef(r){this.marked.add(r)}isMarked(r){return this.marked.has(r)}getIndexedValue(r){let a=this.refs.get(r);if(a!=null)return this.markRef(a),{type:1,value:we(a)};let n=this.refs.size;return this.refs.set(r,n),{type:0,value:n}}getReference(r){let a=this.getIndexedValue(r);return a.type===1?a:B(r)?{type:2,value:Re(a.value,r)}:a}parseWellKnownSymbol(r){let a=this.getReference(r);return a.type!==0?a.value:(L(r in K,new S(r)),Ee(a.value,r))}parseSpecialReference(r){let a=this.getIndexedValue(qe[r]);return a.type===1?a.value:c(26,a.value,r,t,t,t,t,t,t,t,t,t)}parseIteratorFactory(){let r=this.getIndexedValue(Ke);return r.type===1?r.value:c(27,r.value,t,t,t,t,t,t,t,this.parseWellKnownSymbol(Symbol.iterator),t,t)}parseAsyncIteratorFactory(){let r=this.getIndexedValue(We);return r.type===1?r.value:c(29,r.value,t,t,t,t,t,t,[this.parseSpecialReference(1),this.parseWellKnownSymbol(Symbol.asyncIterator)],t,t,t)}createObjectNode(r,a,n,s){return c(n?11:10,r,t,t,t,t,s,t,t,t,t,W(a))}createMapNode(r,a,n,s){return c(8,r,t,t,t,t,t,{k:a,v:n,s},t,this.parseSpecialReference(0),t,t)}createPromiseConstructorNode(r){return c(22,r,t,t,t,t,t,t,t,this.parseSpecialReference(1),t,t)}createAbortSignalConstructorNode(r){return c(35,r,t,t,t,t,t,t,t,this.parseSpecialReference(5),t,t)}},Qe=class extends Ye{async parseItems(e){let r=[];for(let a=0,n=e.length;a<n;a++)a in e&&(r[a]=await this.parse(e[a]));return r}async parseArray(e,r){return xe(e,r,await this.parseItems(r))}async parseProperties(e){let r=Object.entries(e),a=[],n=[];for(let i=0,u=r.length;i<u;i++)a.push(y(r[i][0])),n.push(await this.parse(r[i][1]));let s=Symbol.iterator;return s in e&&(a.push(this.parseWellKnownSymbol(s)),n.push(Te(this.parseIteratorFactory(),await this.parse(He(e))))),s=Symbol.asyncIterator,s in e&&(a.push(this.parseWellKnownSymbol(s)),n.push(_e(this.parseAsyncIteratorFactory(),await this.parse(Ge(e))))),s=Symbol.toStringTag,s in e&&(a.push(this.parseWellKnownSymbol(s)),n.push(_(e[s]))),s=Symbol.isConcatSpreadable,s in e&&(a.push(this.parseWellKnownSymbol(s)),n.push(e[s]?O:k)),{k:a,v:n,s:a.length}}async parsePlainObject(e,r,a){return this.createObjectNode(e,r,a,await this.parseProperties(r))}async parseBoxed(e,r){return Ae(e,await this.parse(r.valueOf()))}async parseTypedArray(e,r){return Ie(e,r,await this.parse(r.buffer))}async parseBigIntTypedArray(e,r){return $e(e,r,await this.parse(r.buffer))}async parseDataView(e,r){return Pe(e,r,await this.parse(r.buffer))}async parseError(e,r){let a=T(r,this.features);return Fe(e,r,a?await this.parseProperties(a):t)}async parseAggregateError(e,r){let a=T(r,this.features);return Oe(e,r,a?await this.parseProperties(a):t)}async parseMap(e,r){let a=[],n=[];for(let[s,i]of r.entries())a.push(await this.parse(s)),n.push(await this.parse(i));return this.createMapNode(e,a,n,r.size)}async parseSet(e,r){let a=[];for(let n of r.keys())a.push(await this.parse(n));return ke(e,r.size,a)}async parsePromise(e,r){let[a,n]=await Je(r);return c(12,e,a,t,t,t,t,t,t,await this.parse(n),t,t)}async parsePlugin(e,r){let a=this.plugins;if(a)for(let n=0,s=a.length;n<s;n++){let i=a[n];if(i.parse.async&&i.test(r))return ze(e,i.tag,await i.parse.async(r,this,{id:e}))}return t}async parseStream(e,r){return Ce(e,this.parseSpecialReference(4),await new Promise((a,n)=>{let s=[],i=r.on({next:u=>{this.markRef(e),this.parse(u).then(o=>{s.push(je(e,o))},o=>{n(o),i()})},throw:u=>{this.markRef(e),this.parse(u).then(o=>{s.push(Ue(e,o)),a(s),i()},o=>{n(o),i()})},return:u=>{this.markRef(e),this.parse(u).then(o=>{s.push(Me(e,o)),a(s),i()},o=>{n(o),i()})}})}))}async parseAbortSignalSync(e,r){return c(37,e,t,t,t,t,t,t,t,await this.parse(r.reason),t,t)}async parseAbortSignal(e,r){return r.aborted||await oe(r),this.parseAbortSignalSync(e,r)}async parseObject(e,r){if(Array.isArray(r))return this.parseArray(e,r);if(Xe(r))return this.parseStream(e,r);let a=r.constructor;if(a===Ve)return this.parse(r.replacement);let n=await this.parsePlugin(e,r);if(n)return n;switch(a){case Object:return this.parsePlainObject(e,r,!1);case t:return this.parsePlainObject(e,r,!0);case Date:return ge(e,r);case RegExp:return ve(e,r);case Error:case EvalError:case RangeError:case ReferenceError:case SyntaxError:case TypeError:case URIError:return this.parseError(e,r);case Number:case Boolean:case String:case BigInt:return this.parseBoxed(e,r);case ArrayBuffer:return Se(e,r);case Int8Array:case Int16Array:case Int32Array:case Uint8Array:case Uint16Array:case Uint32Array:case Uint8ClampedArray:case Float32Array:case Float64Array:return this.parseTypedArray(e,r);case DataView:return this.parseDataView(e,r);case Map:return this.parseMap(e,r);case Set:return this.parseSet(e,r)}if(a===Promise||r instanceof Promise)return this.parsePromise(e,r);let s=this.features;if(s&32&&typeof AbortSignal<"u"&&a===AbortSignal)return this.parseAbortSignal(e,r);if(s&16)switch(a){case BigInt64Array:case BigUint64Array:return this.parseBigIntTypedArray(e,r)}if(s&1&&typeof AggregateError<"u"&&(a===AggregateError||r instanceof AggregateError))return this.parseAggregateError(e,r);if(r instanceof Error)return this.parseError(e,r);if(Symbol.iterator in r||Symbol.asyncIterator in r)return this.parsePlainObject(e,r,!!a);throw new S(r)}async parseFunction(e){let r=this.getReference(e);if(r.type!==0)return r.value;let a=await this.parsePlugin(r.value,e);if(a)return a;throw new S(e)}async parse(e){try{switch(typeof e){case"boolean":return e?O:k;case"undefined":return ce;case"string":return _(e);case"number":return me(e);case"bigint":return be(e);case"object":{if(e){let r=this.getReference(e);return r.type===0?await this.parseObject(r.value,e):r.value}return le}case"symbol":return this.parseWellKnownSymbol(e);case"function":return this.parseFunction(e);default:throw new S(e)}}catch(r){throw new De(r)}}},Ze=class extends Qe{constructor(){super(...arguments),this.mode="vanilla"}};function er(e){return(0,eval)(e)}async function q(e,r={}){let a=ne(r.plugins),n=new Ze({plugins:a,disabledFeatures:r.disabledFeatures});return{t:await n.parse(e),f:n.features,m:Array.from(n.marked)}}function E(e){return{detail:e.detail,bubbles:e.bubbles,cancelable:e.cancelable,composed:e.composed}}var rr={tag:"seroval-plugins/web/CustomEvent",test(e){return typeof CustomEvent>"u"?!1:e instanceof CustomEvent},parse:{sync(e,r){return{type:r.parse(e.type),options:r.parse(E(e))}},async async(e,r){return{type:await r.parse(e.type),options:await r.parse(E(e))}},stream(e,r){return{type:r.parse(e.type),options:r.parse(E(e))}}},serialize(e,r){return"new CustomEvent("+r.serialize(e.type)+","+r.serialize(e.options)+")"},deserialize(e,r){return new CustomEvent(r.deserialize(e.type),r.deserialize(e.options))}},tr=rr,ar={tag:"seroval-plugins/web/DOMException",test(e){return typeof DOMException>"u"?!1:e instanceof DOMException},parse:{sync(e,r){return{name:r.parse(e.name),message:r.parse(e.message)}},async async(e,r){return{name:await r.parse(e.name),message:await r.parse(e.message)}},stream(e,r){return{name:r.parse(e.name),message:r.parse(e.message)}}},serialize(e,r){return"new DOMException("+r.serialize(e.message)+","+r.serialize(e.name)+")"},deserialize(e,r){return new DOMException(r.deserialize(e.message),r.deserialize(e.name))}},nr=ar;function R(e){return{bubbles:e.bubbles,cancelable:e.cancelable,composed:e.composed}}var sr={tag:"seroval-plugins/web/Event",test(e){return typeof Event>"u"?!1:e instanceof Event},parse:{sync(e,r){return{type:r.parse(e.type),options:r.parse(R(e))}},async async(e,r){return{type:await r.parse(e.type),options:await r.parse(R(e))}},stream(e,r){return{type:r.parse(e.type),options:r.parse(R(e))}}},serialize(e,r){return"new Event("+r.serialize(e.type)+","+r.serialize(e.options)+")"},deserialize(e,r){return new Event(r.deserialize(e.type),r.deserialize(e.options))}},ir=sr,or={tag:"seroval-plugins/web/File",test(e){return typeof File>"u"?!1:e instanceof File},parse:{async async(e,r){return{name:await r.parse(e.name),options:await r.parse({type:e.type,lastModified:e.lastModified}),buffer:await r.parse(await e.arrayBuffer())}}},serialize(e,r){return"new File(["+r.serialize(e.buffer)+"],"+r.serialize(e.name)+","+r.serialize(e.options)+")"},deserialize(e,r){return new File([r.deserialize(e.buffer)],r.deserialize(e.name),r.deserialize(e.options))}},ur=or;function z(e){let r=[];return e.forEach((a,n)=>{r.push([n,a])}),r}var d={},cr={tag:"seroval-plugins/web/FormDataFactory",test(e){return e===d},parse:{sync(){},async async(){return await Promise.resolve(void 0)},stream(){}},serialize(e,r){return r.createEffectfulFunction(["e","f","i","s","t"],"f=new FormData;for(i=0,s=e.length;i<s;i++)f.append((t=e[i])[0],t[1]);return f")},deserialize(){return d}},lr={tag:"seroval-plugins/web/FormData",extends:[ur,cr],test(e){return typeof FormData>"u"?!1:e instanceof FormData},parse:{sync(e,r){return{factory:r.parse(d),entries:r.parse(z(e))}},async async(e,r){return{factory:await r.parse(d),entries:await r.parse(z(e))}},stream(e,r){return{factory:r.parse(d),entries:r.parse(z(e))}}},serialize(e,r){return"("+r.serialize(e.factory)+")("+r.serialize(e.entries)+")"},deserialize(e,r){let a=new FormData,n=r.deserialize(e.entries);for(let s=0,i=n.length;s<i;s++){let u=n[s];a.append(u[0],u[1])}return a}},fr=lr;function x(e){let r=[];return e.forEach((a,n)=>{r.push([n,a])}),r}var pr={tag:"seroval-plugins/web/Headers",test(e){return typeof Headers>"u"?!1:e instanceof Headers},parse:{sync(e,r){return r.parse(x(e))},async async(e,r){return await r.parse(x(e))},stream(e,r){return r.parse(x(e))}},serialize(e,r){return"new Headers("+r.serialize(e)+")"},deserialize(e,r){return new Headers(r.deserialize(e))}},P=pr,m={},hr={tag:"seroval-plugins/web/ReadableStreamFactory",test(e){return e===m},parse:{sync(){},async async(){return await Promise.resolve(void 0)},stream(){}},serialize(e,r){return r.createFunction(["d"],"new ReadableStream({start:"+r.createEffectfulFunction(["c"],"d.on({next:"+r.createEffectfulFunction(["v"],"c.enqueue(v)")+",throw:"+r.createEffectfulFunction(["v"],"c.error(v)")+",return:"+r.createEffectfulFunction([],"c.close()")+"})")+"})")},deserialize(){return m}};function C(e){let r=$(),a=e.getReader();async function n(){try{let s=await a.read();s.done?r.return(s.value):(r.next(s.value),await n())}catch(s){r.throw(s)}}return n().catch(()=>{}),r}var yr={tag:"seroval/plugins/web/ReadableStream",extends:[hr],test(e){return typeof ReadableStream>"u"?!1:e instanceof ReadableStream},parse:{sync(e,r){return{factory:r.parse(m),stream:r.parse($())}},async async(e,r){return{factory:await r.parse(m),stream:await r.parse(C(e))}},stream(e,r){return{factory:r.parse(m),stream:r.parse(C(e))}}},serialize(e,r){return"("+r.serialize(e.factory)+")("+r.serialize(e.stream)+")"},deserialize(e,r){let a=r.deserialize(e.stream);return new ReadableStream({start(n){a.on({next(s){n.enqueue(s)},throw(s){n.error(s)},return(){n.close()}})}})}},F=yr;function j(e,r){return{body:r,cache:e.cache,credentials:e.credentials,headers:e.headers,integrity:e.integrity,keepalive:e.keepalive,method:e.method,mode:e.mode,redirect:e.redirect,referrer:e.referrer,referrerPolicy:e.referrerPolicy}}var dr={tag:"seroval-plugins/web/Request",extends:[F,P],test(e){return typeof Request>"u"?!1:e instanceof Request},parse:{async async(e,r){return{url:await r.parse(e.url),options:await r.parse(j(e,e.body?await e.clone().arrayBuffer():null))}},stream(e,r){return{url:r.parse(e.url),options:r.parse(j(e,e.clone().body))}}},serialize(e,r){return"new Request("+r.serialize(e.url)+","+r.serialize(e.options)+")"},deserialize(e,r){return new Request(r.deserialize(e.url),r.deserialize(e.options))}},mr=dr;function U(e){return{headers:e.headers,status:e.status,statusText:e.statusText}}var br={tag:"seroval-plugins/web/Response",extends:[F,P],test(e){return typeof Response>"u"?!1:e instanceof Response},parse:{async async(e,r){return{body:await r.parse(e.body?await e.clone().arrayBuffer():null),options:await r.parse(U(e))}},stream(e,r){return{body:r.parse(e.clone().body),options:r.parse(U(e))}}},serialize(e,r){return"new Response("+r.serialize(e.body)+","+r.serialize(e.options)+")"},deserialize(e,r){return new Response(r.deserialize(e.body),r.deserialize(e.options))}},wr=br,gr={tag:"seroval-plugins/web/URLSearchParams",test(e){return typeof URLSearchParams>"u"?!1:e instanceof URLSearchParams},parse:{sync(e,r){return r.parse(e.toString())},async async(e,r){return await r.parse(e.toString())},stream(e,r){return r.parse(e.toString())}},serialize(e,r){return"new URLSearchParams("+r.serialize(e)+")"},deserialize(e,r){return new URLSearchParams(r.deserialize(e))}},vr=gr,Sr={tag:"seroval-plugins/web/URL",test(e){return typeof URL>"u"?!1:e instanceof URL},parse:{sync(e,r){return r.parse(e.href)},async async(e,r){return await r.parse(e.href)},stream(e,r){return r.parse(e.href)}},serialize(e,r){return"new URL("+r.serialize(e)+")"},deserialize(e,r){return new URL(r.deserialize(e))}},Er=Sr;class Rr{reader;buffer;done;constructor(r){this.reader=r.getReader(),this.buffer=new Uint8Array(0),this.done=!1}async readChunk(){const r=await this.reader.read();if(r.done)this.done=!0;else{let a=new Uint8Array(this.buffer.length+r.value.length);a.set(this.buffer),a.set(r.value,this.buffer.length),this.buffer=a}}async next(){if(this.buffer.length===0)return this.done?{done:!0,value:void 0}:(await this.readChunk(),await this.next());const r=new TextDecoder().decode(this.buffer.subarray(1,11)),a=Number.parseInt(r,16);for(;a>this.buffer.length-12;){if(this.done)throw new Error("Malformed server function stream.");await this.readChunk()}const n=new TextDecoder().decode(this.buffer.subarray(12,12+a));return this.buffer=this.buffer.subarray(12+a),{done:!1,value:er(n)}}async drain(){for(;!(await this.next()).done;);}}async function M(e,r){if(!r.body)throw new Error("missing body");const a=new Rr(r.body),n=await a.next();return n.done||a.drain().then(()=>{delete $R[e]},()=>{}),n.value}let zr=0;function v(e,r,a,n){return fetch(e,{method:"POST",...n,headers:{...n.headers,"X-Server-Id":r,"X-Server-Instance":a}})}const X=[tr,nr,ir,fr,P,F,mr,wr,vr,Er];async function N(e,r,a,n){const s=`server-fn:${zr++}`,i=await(n.length===0?v(e,r,s,a):n.length===1&&n[0]instanceof FormData?v(e,r,s,{...a,body:n[0]}):n.length===1&&n[0]instanceof URLSearchParams?v(e,r,s,{...a,body:n[0],headers:{...a.headers,"Content-Type":"application/x-www-form-urlencoded"}}):v(e,r,s,{...a,body:JSON.stringify(await Promise.resolve(q(n,{plugins:X}))),headers:{...a.headers,"Content-Type":"application/json"}}));if(i.headers.has("Location")||i.headers.has("X-Revalidate")||i.headers.has("X-Single-Flight"))return i.body&&(i.customBody=()=>M(s,i)),i;const u=i.headers.get("Content-Type");let o;if(u&&u.startsWith("text/plain")?o=await i.text():u&&u.startsWith("application/json")?o=await i.json():o=await M(s,i),i.headers.has("X-Error"))throw o;return o}function xr(e,r,a){const n="";return new Proxy(e,{get(s,i,u){if(i==="url")return`${n}/_server?id=${encodeURIComponent(r)}&name=${encodeURIComponent(a)}`;if(i==="GET")return u.withOptions({method:"GET"});if(i==="withOptions"){const o=`${n}/_server/?id=${encodeURIComponent(r)}&name=${encodeURIComponent(a)}`;return l=>{const h=async(...f)=>{const b=l.method&&l.method.toUpperCase()==="GET";return N(b?o+(f.length?`&args=${encodeURIComponent(JSON.stringify(await Promise.resolve(q(f,{plugins:X}))))}`:""):`${n}/_server`,`${r}#${a}`,l,b?[]:f)};return h.url=o,h}}return s[i]},apply(s,i,u){return N(`${n}/_server`,`${r}#${a}`,{},u)}})}var Ar=Y('<button class="w-[200px] rounded-full bg-blue-100 border-2 border-gray-300 focus:border-gray-400 active:border-gray-400 px-[2rem] py-[1rem]">Clicks: <!$><!/>');function Cr(){const[e,r]=H(0);return(()=>{var a=J(Ar),n=a.firstChild,s=n.nextSibling,[i,u]=Q(s.nextSibling);return a.$$click=async()=>{r(l=>l+1);const o=$r();console.log(o)},Z(a,e,i,u),ee(),a})()}const Ir=xr(()=>{},"src_components_Counter_tsx--x_1","/home/jk/repos/blog/src/components/Counter.tsx?tsr-directive-use-server="),$r=Ir;G(["click"]);export{Cr as C,xr as c};
