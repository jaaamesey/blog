import{a as A,r as m,R as n}from"./index-BJfUAbRs.js";var E={},b={},S;function _(){if(S)return b;S=1,Object.defineProperty(b,"__esModule",{value:!0}),b.useForceUpdate=o;var r=A();function i(t,c){return a(t)||s(t,c)||l(t,c)||f()}function f(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l(t,c){if(t){if(typeof t=="string")return u(t,c);var e={}.toString.call(t).slice(8,-1);return e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set"?Array.from(t):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?u(t,c):void 0}}function u(t,c){(c==null||c>t.length)&&(c=t.length);for(var e=0,g=Array(c);e<c;e++)g[e]=t[e];return g}function s(t,c){var e=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(e!=null){var g,d,p,v,x=[],h=!0,T=!1;try{if(p=(e=e.call(t)).next,c!==0)for(;!(h=(g=p.call(e)).done)&&(x.push(g.value),x.length!==c);h=!0);}catch(U){T=!0,d=U}finally{try{if(!h&&e.return!=null&&(v=e.return(),Object(v)!==v))return}finally{if(T)throw d}}return x}}function a(t){if(Array.isArray(t))return t}function o(){var t=(0,r.useReducer)(function(){return Symbol()},void 0),c=i(t,2),e=c[1];return function(){return e()}}return b}var y={},C;function F(){if(C)return y;C=1,Object.defineProperty(y,"__esModule",{value:!0}),y.depsAreEqual=r;function r(i,f){return i.length===f.length&&f.every(function(l,u){return Object.is(l,i[u])})}return y}var w={},R;function W(){if(R)return w;R=1,Object.defineProperty(w,"__esModule",{value:!0}),w.isFunction=r;function r(i){return typeof i=="function"}return w}var I;function q(){if(I)return E;I=1,Object.defineProperty(E,"__esModule",{value:!0}),E.useStateWithDeps=u;var r=A(),i=_(),f=F(),l=W();function u(s,a){var o=(0,r.useRef)(!1),t=null;o.current||(o.current=!0,(0,l.isFunction)(s)?t=s():t=s);var c=(0,r.useRef)(t),e=(0,r.useRef)(a);if(!(0,f.depsAreEqual)(e.current,a)){var g;(0,l.isFunction)(s)?g=s(c.current):g=s,c.current=g,e.current=a}var d=(0,i.useForceUpdate)(),p=(0,r.useCallback)(function(x){var h;(0,l.isFunction)(x)?h=x(c.current):h=x,Object.is(c.current,h)||(c.current=h,d())},[]);return[c.current,p]}return E}var P=q();function O(){const[r,i]=m.useState([{name:"First task"},{name:"Second task"},{name:"Third task"}]),[f,l]=m.useState(0);return n.createElement("div",{class:"flex flex-col gap-2"},n.createElement("h2",{class:"text-xl font-bold"},"Todo list"),n.createElement("div",{class:"flex w-full justify-between flex-wrap gap-4"},n.createElement("div",{class:"flex flex-col gap-2 grow"},n.createElement("strong",null,"Tasks:"),r.map((u,s)=>n.createElement("button",{class:"text-start",style:{fontWeight:f===s?"bold":void 0},onClick:()=>l(s)},'Edit "',u.name,'"'))),n.createElement("div",{class:"flex flex-col gap-2 basis-40"},n.createElement("strong",null,'Editing "',r[f].name,'"'),"Title: ",n.createElement(D,{item:r[f],saveName:u=>i(s=>s.map((a,o)=>o===f?{...a,name:u}:a)),saveDrawing:u=>i(s=>s.map((a,o)=>o===f?{...a,drawing:u}:a))}))))}const k=["black","white","red","blue","yellow"];function D({item:r,saveName:i,saveDrawing:f,enableDrawing:l}){const[u,s]=m.useState(r.name,[r]),[a,o]=m.useState("black"),t={width:200,height:200},c=m.useRef();return m.useLayoutEffect(()=>{if(!c.current)return;const e=c.current.getContext("2d");if(!r.drawing){e.reset(),e.clearRect(0,0,t.width,t.height);return}const g=new Image(t.width,t.height);g.onload=()=>{e.reset(),e.clearRect(0,0,t.width,t.height),e.drawImage(g,0,0)},g.src=r.drawing},[r]),n.createElement("div",{class:"flex flex-col gap-2"},n.createElement("form",{class:"flex"},n.createElement("input",{value:u,onChange:e=>s(e.target.value)}),n.createElement("button",{type:"submit",style:{display:l?"none":void 0},onClick:e=>{e.preventDefault(),i(u)}},"Save")),l?n.createElement("div",{class:"flex flex-col gap-2"},n.createElement("strong",null,"Notes"),n.createElement("div",{class:"flex gap-2"},k.map(e=>n.createElement("span",{style:{display:"inline-block",width:"28px",height:"28px","background-color":e,"border-radius":"100%",outline:"#aaa solid 1px",transform:a===e?"scale(1.3)":void 0},onClick:()=>o(e)}))),n.createElement("canvas",{ref:c,class:"border-black border",width:t.width,height:t.height,style:{...t,"image-rendering":"pixelated","touch-action":"none"},onPointerMove:e=>{const d=e.currentTarget.getContext("2d");if(!e.buttons){d.beginPath();return}const p=e.pageX-e.currentTarget.offsetLeft,v=e.pageY-e.currentTarget.offsetTop;d.strokeStyle=a,d.lineWidth=2,d.lineCap="round",d.lineTo(p,v),d.stroke()},onPointerUp:e=>{e.currentTarget.getContext("2d").beginPath()}}),n.createElement("button",{onClick:()=>{i(u),f(c.current.toDataURL("image/png"))}},"Save")):void 0)}function j({item:r,saveName:i,saveDrawing:f,enableDrawing:l}){const[u,s]=P.useStateWithDeps(r.name,[r]),[a,o]=m.useState("black"),t={width:200,height:200},c=m.useRef();return m.useLayoutEffect(()=>{if(!c.current)return;const e=c.current.getContext("2d");if(!r.drawing){e.reset(),e.clearRect(0,0,t.width,t.height);return}const g=new Image(t.width,t.height);g.onload=()=>{e.reset(),e.clearRect(0,0,t.width,t.height),e.drawImage(g,0,0)},g.src=r.drawing},[r]),n.createElement("div",{class:"flex flex-col gap-2"},n.createElement("form",{class:"flex"},n.createElement("input",{value:u,onChange:e=>s(e.target.value)}),n.createElement("button",{type:"submit",style:{display:l?"none":void 0},onClick:e=>{e.preventDefault(),i(u)}},"Save")),l?n.createElement("div",{class:"flex flex-col gap-2"},n.createElement("strong",null,"Notes"),n.createElement("div",{class:"flex gap-2"},k.map(e=>n.createElement("span",{style:{display:"inline-block",width:"28px",height:"28px","background-color":e,"border-radius":"100%",outline:"#aaa solid 1px",transform:a===e?"scale(1.3)":void 0},onClick:()=>o(e)}))),n.createElement("canvas",{ref:c,class:"border-black border",width:t.width,height:t.height,style:{...t,"image-rendering":"pixelated","touch-action":"none"},onPointerMove:e=>{const d=e.currentTarget.getContext("2d");if(!e.buttons){d.beginPath();return}const p=e.pageX-e.currentTarget.offsetLeft,v=e.pageY-e.currentTarget.offsetTop;d.strokeStyle=a,d.lineWidth=2,d.lineCap="round",d.lineTo(p,v),d.stroke()},onPointerUp:e=>{e.currentTarget.getContext("2d").beginPath()}}),n.createElement("button",{onClick:()=>{i(u),f(c.current.toDataURL("image/png"))}},"Save")):void 0)}function L({item:r,saveName:i,saveDrawing:f,enableDrawing:l}){const[u,s]=m.useState("black"),a={width:200,height:200},o=m.useRef(),[t,c]=m.useState(r.name,[r]);return m.useEffect(()=>{c(r.name)},[r.name]),m.useLayoutEffect(()=>{if(!o.current)return;const e=o.current.getContext("2d");if(!r.drawing){e.reset(),e.clearRect(0,0,a.width,a.height);return}const g=new Image(a.width,a.height);g.onload=()=>{e.reset(),e.clearRect(0,0,a.width,a.height),e.drawImage(g,0,0)},g.src=r.drawing},[r]),n.createElement("div",{class:"flex flex-col gap-2"},n.createElement("form",{class:"flex"},n.createElement("input",{value:t,onChange:e=>c(e.target.value)}),n.createElement("button",{type:"submit",style:{display:l?"none":void 0},onClick:e=>{e.preventDefault(),i(t)}},"Save")),l?n.createElement("div",{class:"flex flex-col gap-2"},n.createElement("strong",null,"Notes"),n.createElement("div",{class:"flex gap-2"},k.map(e=>n.createElement("span",{style:{display:"inline-block",width:"28px",height:"28px","background-color":e,"border-radius":"100%",outline:"#aaa solid 1px",transform:u===e?"scale(1.3)":void 0},onClick:()=>s(e)}))),n.createElement("canvas",{ref:o,class:"border-black border",width:a.width,height:a.height,style:{...a,"image-rendering":"pixelated","touch-action":"none"},onPointerMove:e=>{const d=e.currentTarget.getContext("2d");if(!e.buttons){d.beginPath();return}const p=e.pageX-e.currentTarget.offsetLeft,v=e.pageY-e.currentTarget.offsetTop;d.strokeStyle=u,d.lineWidth=2,d.lineCap="round",d.lineTo(p,v),d.stroke()},onPointerUp:e=>{e.currentTarget.getContext("2d").beginPath()}}),n.createElement("button",{onClick:()=>{i(t),f(o.current.toDataURL("image/png"))}},"Save")):void 0)}function B(r){const[i,f]=m.useState([{name:"First task"},{name:"Second task"},{name:"Third task"}]),[l,u]=m.useState(0);return n.createElement("div",{class:"flex flex-col gap-2"},n.createElement("h2",{class:"text-xl font-bold"},"Todo list"),n.createElement("div",{class:"flex w-full justify-between flex-wrap gap-4"},n.createElement("div",{class:"flex flex-col gap-2 grow"},n.createElement("strong",null,"Tasks:"),i.map((s,a)=>n.createElement("button",{class:"text-start",style:{fontWeight:l===a?"bold":void 0},onClick:()=>u(a)},'Edit "',s.name,'"'))),n.createElement("div",{class:"flex flex-col gap-2 basis-40"},n.createElement("strong",null,'Editing "',i[l].name,'"'),"Title: ",n.createElement(D,{key:l,item:i[l],saveName:s=>f(a=>a.map((o,t)=>t===l?{...o,name:s}:o)),saveDrawing:s=>f(a=>a.map((o,t)=>t===l?{...o,drawing:s}:o)),enableDrawing:r.enableDrawing}))))}function N(r){const[i,f]=m.useState([{name:"First task"},{name:"Second task"},{name:"Third task"}]),[l,u]=m.useState(0);return n.createElement("div",{class:"flex flex-col gap-2"},n.createElement("h2",{class:"text-xl font-bold"},"Todo list"),n.createElement("div",{class:"flex w-full justify-between flex-wrap gap-4"},n.createElement("div",{class:"flex flex-col gap-2 grow"},n.createElement("strong",null,"Tasks:"),i.map((s,a)=>n.createElement("button",{class:"text-start",style:{fontWeight:l===a?"bold":void 0},onClick:()=>u(a)},'Edit "',s.name,'"'))),n.createElement("div",{class:"flex flex-col gap-2 basis-40"},n.createElement("strong",null,'Editing "',i[l].name,'"'),"Title: ",n.createElement(j,{item:i[l],saveName:s=>f(a=>a.map((o,t)=>t===l?{...o,name:s}:o)),saveDrawing:s=>f(a=>a.map((o,t)=>t===l?{...o,drawing:s}:o)),enableDrawing:r.enableDrawing}))))}function $(r){const[i,f]=m.useState([{name:"First task"},{name:"Second task"},{name:"Third task"}]),[l,u]=m.useState(0);return n.createElement("div",{class:"flex flex-col gap-2"},n.createElement("h2",{class:"text-xl font-bold"},"Todo list"),n.createElement("div",{class:"flex w-full justify-between flex-wrap gap-4"},n.createElement("div",{class:"flex flex-col gap-2 grow"},n.createElement("strong",null,"Tasks:"),i.map((s,a)=>n.createElement("button",{class:"text-start",style:{fontWeight:l===a?"bold":void 0},onClick:()=>u(a)},'Edit "',s.name,'"'))),n.createElement("div",{class:"flex flex-col gap-2 basis-40"},n.createElement("strong",null,'Editing "',i[l].name,'"'),"Title: ",n.createElement(L,{item:i[l],saveName:s=>f(a=>a.map((o,t)=>t===l?{...o,name:s}:o)),saveDrawing:s=>f(a=>a.map((o,t)=>t===l?{...o,drawing:s}:o)),enableDrawing:r.enableDrawing}))))}export{O as BadTodoApp1,N as BadTodoAppWithDeps,B as BadTodoAppWithKey,$ as BadTodoAppWithUseEffect};
