import{a as A,r as g,R as a}from"./index-BJfUAbRs.js";var x={},b={},S;function F(){if(S)return b;S=1,Object.defineProperty(b,"__esModule",{value:!0}),b.useForceUpdate=o;var r=A();function i(t,c){return n(t)||s(t,c)||l(t,c)||d()}function d(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l(t,c){if(t){if(typeof t=="string")return u(t,c);var e={}.toString.call(t).slice(8,-1);return e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set"?Array.from(t):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?u(t,c):void 0}}function u(t,c){(c==null||c>t.length)&&(c=t.length);for(var e=0,m=Array(c);e<c;e++)m[e]=t[e];return m}function s(t,c){var e=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(e!=null){var m,f,p,v,E=[],h=!0,T=!1;try{if(p=(e=e.call(t)).next,c!==0)for(;!(h=(m=p.call(e)).done)&&(E.push(m.value),E.length!==c);h=!0);}catch(_){T=!0,f=_}finally{try{if(!h&&e.return!=null&&(v=e.return(),Object(v)!==v))return}finally{if(T)throw f}}return E}}function n(t){if(Array.isArray(t))return t}function o(){var t=(0,r.useReducer)(function(){return Symbol()},void 0),c=i(t,2),e=c[1];return function(){return e()}}return b}var y={},C;function W(){if(C)return y;C=1,Object.defineProperty(y,"__esModule",{value:!0}),y.depsAreEqual=r;function r(i,d){return i.length===d.length&&d.every(function(l,u){return Object.is(l,i[u])})}return y}var w={},R;function U(){if(R)return w;R=1,Object.defineProperty(w,"__esModule",{value:!0}),w.isFunction=r;function r(i){return typeof i=="function"}return w}var I;function q(){if(I)return x;I=1,Object.defineProperty(x,"__esModule",{value:!0}),x.useStateWithDeps=u;var r=A(),i=F(),d=W(),l=U();function u(s,n){var o=(0,r.useRef)(!1),t=null;o.current||(o.current=!0,(0,l.isFunction)(s)?t=s():t=s);var c=(0,r.useRef)(t),e=(0,r.useRef)(n);if(!(0,d.depsAreEqual)(e.current,n)){var m;(0,l.isFunction)(s)?m=s(c.current):m=s,c.current=m,e.current=n}var f=(0,i.useForceUpdate)(),p=(0,r.useCallback)(function(E){var h;(0,l.isFunction)(E)?h=E(c.current):h=E,Object.is(c.current,h)||(c.current=h,f())},[]);return[c.current,p]}return x}var j=q();function B(){const[r,i]=g.useState([{name:"First task"},{name:"Second task"},{name:"Third task"}]),[d,l]=g.useState(0);return a.createElement("div",{class:"flex flex-col gap-2"},a.createElement("h2",{class:"text-xl font-bold"},"Todo list"),a.createElement("div",{class:"flex w-full justify-between flex-wrap gap-4"},a.createElement("div",{class:"flex flex-col gap-2 grow"},a.createElement("strong",null,"Tasks:"),r.map((u,s)=>a.createElement("button",{class:"text-start",style:{fontWeight:d===s?"bold":void 0},onClick:()=>l(s)},'Edit "',u.name,'"'))),a.createElement("div",{class:"flex flex-col gap-2 basis-40"},a.createElement("strong",null,'Editing "',r[d].name,'"'),"Title: ",a.createElement(D,{item:r[d],saveName:u=>i(s=>s.map((n,o)=>o===d?{...n,name:u}:n)),saveDrawing:u=>i(s=>s.map((n,o)=>o===d?{...n,drawing:u}:n))}))))}const k=["black","white","red","blue","yellow"];function D({item:r,saveName:i,saveDrawing:d,enableDrawing:l}){const[u,s]=g.useState(r.name,[r]),[n,o]=g.useState("black"),t={width:200,height:200},c=g.useRef();return g.useLayoutEffect(()=>{if(!c.current)return;const e=c.current.getContext("2d");if(!r.drawing){e.reset(),e.clearRect(0,0,t.width,t.height);return}const m=new Image(t.width,t.height);m.onload=()=>{e.reset(),e.clearRect(0,0,t.width,t.height),e.drawImage(m,0,0)},m.src=r.drawing},[r]),a.createElement("div",{class:"flex flex-col gap-2"},a.createElement("form",{class:"flex"},a.createElement("input",{value:u,onChange:e=>s(e.target.value)}),a.createElement("button",{type:"submit",style:{display:l?"none":void 0},onClick:e=>{e.preventDefault(),i(u)}},"Save")),l?a.createElement("div",{class:"flex flex-col gap-2"},a.createElement("strong",null,"Notes"),a.createElement("div",{class:"flex gap-2"},k.map(e=>a.createElement("span",{style:{display:"inline-block",width:"28px",height:"28px","background-color":e,"border-radius":"100%",outline:"#aaa solid 1px",transform:n===e?"scale(1.3)":void 0},onClick:()=>o(e)}))),a.createElement("canvas",{ref:c,class:"border-black border",width:t.width,height:t.height,style:{...t,"image-rendering":"pixelated"},onMouseMove:e=>{const f=e.currentTarget.getContext("2d");if(!e.buttons){f.beginPath();return}const p=e.pageX-e.currentTarget.offsetLeft,v=e.pageY-e.currentTarget.offsetTop;f.strokeStyle=n,f.lineWidth=2,f.lineCap="round",f.lineTo(p,v),f.stroke()}}),a.createElement("button",{onClick:()=>{i(u),d(c.current.toDataURL("image/png"))}},"Save")):void 0)}function M({item:r,saveName:i,saveDrawing:d,enableDrawing:l}){const[u,s]=j.useStateWithDeps(r.name,[r]),[n,o]=g.useState("black"),t={width:200,height:200},c=g.useRef();return g.useLayoutEffect(()=>{if(!c.current)return;const e=c.current.getContext("2d");if(!r.drawing){e.reset(),e.clearRect(0,0,t.width,t.height);return}const m=new Image(t.width,t.height);m.onload=()=>{e.reset(),e.clearRect(0,0,t.width,t.height),e.drawImage(m,0,0)},m.src=r.drawing},[r]),a.createElement("div",{class:"flex flex-col gap-2"},a.createElement("form",{class:"flex"},a.createElement("input",{value:u,onChange:e=>s(e.target.value)}),a.createElement("button",{type:"submit",style:{display:l?"none":void 0},onClick:e=>{e.preventDefault(),i(u)}},"Save")),l?a.createElement("div",{class:"flex flex-col gap-2"},a.createElement("strong",null,"Notes"),a.createElement("div",{class:"flex gap-2"},k.map(e=>a.createElement("span",{style:{display:"inline-block",width:"28px",height:"28px","background-color":e,"border-radius":"100%",outline:"#aaa solid 1px",transform:n===e?"scale(1.3)":void 0},onClick:()=>o(e)}))),a.createElement("canvas",{ref:c,class:"border-black border",width:t.width,height:t.height,style:{...t,"image-rendering":"pixelated"},onMouseMove:e=>{const f=e.currentTarget.getContext("2d");if(!e.buttons){f.beginPath();return}const p=e.pageX-e.currentTarget.offsetLeft,v=e.pageY-e.currentTarget.offsetTop;f.strokeStyle=n,f.lineWidth=2,f.lineCap="round",f.lineTo(p,v),f.stroke()}}),a.createElement("button",{onClick:()=>{i(u),d(c.current.toDataURL("image/png"))}},"Save")):void 0)}function L({item:r,saveName:i,saveDrawing:d,enableDrawing:l}){const[u,s]=g.useState("black"),n={width:200,height:200},o=g.useRef(),[t,c]=g.useState(r.name,[r]);return g.useEffect(()=>{c(r.name)},[r.name]),g.useLayoutEffect(()=>{if(!o.current)return;const e=o.current.getContext("2d");if(!r.drawing){e.reset(),e.clearRect(0,0,n.width,n.height);return}const m=new Image(n.width,n.height);m.onload=()=>{e.reset(),e.clearRect(0,0,n.width,n.height),e.drawImage(m,0,0)},m.src=r.drawing},[r]),a.createElement("div",{class:"flex flex-col gap-2"},a.createElement("form",{class:"flex"},a.createElement("input",{value:t,onChange:e=>c(e.target.value)}),a.createElement("button",{type:"submit",style:{display:l?"none":void 0},onClick:e=>{e.preventDefault(),i(t)}},"Save")),l?a.createElement("div",{class:"flex flex-col gap-2"},a.createElement("strong",null,"Notes"),a.createElement("div",{class:"flex gap-2"},k.map(e=>a.createElement("span",{style:{display:"inline-block",width:"28px",height:"28px","background-color":e,"border-radius":"100%",outline:"#aaa solid 1px",transform:u===e?"scale(1.3)":void 0},onClick:()=>s(e)}))),a.createElement("canvas",{ref:o,class:"border-black border",width:n.width,height:n.height,style:{...n,"image-rendering":"pixelated"},onMouseMove:e=>{const f=e.currentTarget.getContext("2d");if(!e.buttons){f.beginPath();return}const p=e.pageX-e.currentTarget.offsetLeft,v=e.pageY-e.currentTarget.offsetTop;f.strokeStyle=u,f.lineWidth=2,f.lineCap="round",f.lineTo(p,v),f.stroke()}}),a.createElement("button",{onClick:()=>{i(t),d(o.current.toDataURL("image/png"))}},"Save")):void 0)}function N(r){const[i,d]=g.useState([{name:"First task"},{name:"Second task"},{name:"Third task"}]),[l,u]=g.useState(0);return a.createElement("div",{class:"flex flex-col gap-2"},a.createElement("h2",{class:"text-xl font-bold"},"Todo list"),a.createElement("div",{class:"flex w-full justify-between flex-wrap gap-4"},a.createElement("div",{class:"flex flex-col gap-2 grow"},a.createElement("strong",null,"Tasks:"),i.map((s,n)=>a.createElement("button",{class:"text-start",style:{fontWeight:l===n?"bold":void 0},onClick:()=>u(n)},'Edit "',s.name,'"'))),a.createElement("div",{class:"flex flex-col gap-2 basis-40"},a.createElement("strong",null,'Editing "',i[l].name,'"'),"Title: ",a.createElement(D,{key:l,item:i[l],saveName:s=>d(n=>n.map((o,t)=>t===l?{...o,name:s}:o)),saveDrawing:s=>d(n=>n.map((o,t)=>t===l?{...o,drawing:s}:o)),enableDrawing:r.enableDrawing}))))}function P(r){const[i,d]=g.useState([{name:"First task"},{name:"Second task"},{name:"Third task"}]),[l,u]=g.useState(0);return a.createElement("div",{class:"flex flex-col gap-2"},a.createElement("h2",{class:"text-xl font-bold"},"Todo list"),a.createElement("div",{class:"flex w-full justify-between flex-wrap gap-4"},a.createElement("div",{class:"flex flex-col gap-2 grow"},a.createElement("strong",null,"Tasks:"),i.map((s,n)=>a.createElement("button",{class:"text-start",style:{fontWeight:l===n?"bold":void 0},onClick:()=>u(n)},'Edit "',s.name,'"'))),a.createElement("div",{class:"flex flex-col gap-2 basis-40"},a.createElement("strong",null,'Editing "',i[l].name,'"'),"Title: ",a.createElement(M,{item:i[l],saveName:s=>d(n=>n.map((o,t)=>t===l?{...o,name:s}:o)),saveDrawing:s=>d(n=>n.map((o,t)=>t===l?{...o,drawing:s}:o)),enableDrawing:r.enableDrawing}))))}function $(r){const[i,d]=g.useState([{name:"First task"},{name:"Second task"},{name:"Third task"}]),[l,u]=g.useState(0);return a.createElement("div",{class:"flex flex-col gap-2"},a.createElement("h2",{class:"text-xl font-bold"},"Todo list"),a.createElement("div",{class:"flex w-full justify-between flex-wrap gap-4"},a.createElement("div",{class:"flex flex-col gap-2 grow"},a.createElement("strong",null,"Tasks:"),i.map((s,n)=>a.createElement("button",{class:"text-start",style:{fontWeight:l===n?"bold":void 0},onClick:()=>u(n)},'Edit "',s.name,'"'))),a.createElement("div",{class:"flex flex-col gap-2 basis-40"},a.createElement("strong",null,'Editing "',i[l].name,'"'),"Title: ",a.createElement(L,{item:i[l],saveName:s=>d(n=>n.map((o,t)=>t===l?{...o,name:s}:o)),saveDrawing:s=>d(n=>n.map((o,t)=>t===l?{...o,drawing:s}:o)),enableDrawing:r.enableDrawing}))))}export{B as BadTodoApp1,P as BadTodoAppWithDeps,N as BadTodoAppWithKey,$ as BadTodoAppWithUseEffect};
