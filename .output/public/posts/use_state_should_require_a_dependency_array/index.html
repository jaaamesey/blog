<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico"><script>(() => {
    let s;
    const o = /* @__PURE__ */ new Set();
    function n() {
      const i = window.localStorage.getItem("colorSchemeOverride") || (window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light");
      s = i;
      for (const a of o) a();
      i == "dark" ? document.documentElement.classList.add("colorSchemeDark") : document.documentElement.classList.remove("colorSchemeDark");
    }
    n(), window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change", n), window._hooks = { setColorSchemeOverride(i) {
      window.localStorage.setItem("colorSchemeOverride", i || ""), n();
    }, onColorSchemeChanged(i) {
      return o.add(i), () => o.delete(i);
    }, getColorScheme() {
      const i = window.localStorage.getItem("colorSchemeOverride") || void 0;
      return { active: s, fromOverride: !!i, override: i, browserPreference: window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light" };
    } };
  })()</script><style>
            @font-face {
              font-family: "Playfair";
              src: url("/fonts/playfair.woff2");
            }
            @font-face {
              font-family: "Playfair Display";
              src: url("/fonts/playfairdisplay.woff2");
            }
            body {
              font-family: 'Playfair', serif;
            }
            h1 {
              font-family: 'Playfair Display', serif;
            }
          </style><script>window._$HY||(e=>{let t=e=>e&&e.hasAttribute&&(e.hasAttribute("data-hk")?e:t(e.host&&e.host.nodeType?e.host:e.parentNode));["click", "input"].forEach((o=>document.addEventListener(o,(o=>{if(!e.events)return;let s=t(o.composedPath&&o.composedPath()[0]||o.target);s&&!e.completed.has(s)&&e.events.push([s,o])}))))})(_$HY={events:[],completed:new WeakSet,r:{},fe(){}});</script><script>self.$R=self.$R||[];_$HY.r["0000000100000"]=$R[0]=($R[2]=r=>(r.p=new Promise((s,f)=>{r.s=s,r.f=f})))($R[1]={p:0,s:0,f:0});($R[3]=(r,d)=>{r.s(d),r.p.s=1,r.p.v=d})($R[1],!0);</script><!--xs--><link href="/_build/assets/client-BjTaVbS-.css" rel="stylesheet" fetchPriority="high" /><link href="/_build/assets/web-V5pwFSD5.js" rel="modulepreload" /><link href="/_build/assets/preload-helper-ug3pwPZ1.js" rel="modulepreload" /><link href="/_build/assets/routing-BMGDGDqe.js" rel="modulepreload" /><link href="/_build/assets/client-AWm-SvHB.js" rel="modulepreload" /><link href="/_build/assets/all_posts.compile-uYno7xFZ.js" rel="modulepreload" /><link href="/_build/assets/components-Dc_S2E9h.js" rel="modulepreload" /><link href="/_build/assets/jsx-runtime-OVrRlQkB.js" rel="modulepreload" /><link href="/_build/assets/embed_react_component-BqAZ-l4f.js" rel="modulepreload" /><link href="/_build/assets/index-D432vQR-.js" rel="modulepreload" /></head><body><div id="app"><!--!$e000000--><link data-hk=000000010000000000 href="/_build/assets/index-B0zURUJ_.css" rel="stylesheet" fetchPriority="high" /><link data-hk=000000010000000001 href="/_build/assets/jsx-runtime-CCakz991.css" rel="stylesheet" fetchPriority="high" /><div data-hk=00000001000000000200 class="min-h-screen flex justify-center py-8 px-4 text-text-primary overflow-x-clip"><div class="max-w-xl w-full"><header class="sticky top-5 not-sm:text-xs flex justify-between items-center pb-4 border-b border-border-color mb-8 z-1"><div style="position:absolute;background-color:rgb(var(--background-rgb));transition:var(--bg-transition);height:100%;width:100%;transform:scaleY(10) scaleX(5);transform-origin:center bottom;top:0;z-index:-1;opacity:0.975"></div><div class="text-text-secondary"><a data-hk=000000010000000002010 style="view-transition-name:logo" href="/" class=" active" link="true" >james karlsson</a></div><div class="flex gap-2 text-text-secondary"></div><div class="text-text-secondary">2025-05-30</div></header><h1 class="text-4xl md:text-5xl mb-8 text-text-primary"><div><span style="view-transition-name:title-use_state_should_require_a_dependency_array">useState should require a dependency array</span></div></h1><div class="text-lg flex flex-col gap-4 mb-20 _postBody_1hrkg_1"><p data-hk=0000000100000000020320 >React has a wonderful hook called <a data-hk=0000000100000000020310 href="https://react.dev/reference/react/useState" ><code data-hk=0000000100000000020300 >useState</code></a> that we use to set and listen to things that might change over time.</p>
<p data-hk=0000000100000000020330 >There's a few points I'd like to argue here.</p>
<p data-hk=0000000100000000020360 >My first, and hopefully least controversial point, is that <strong data-hk=0000000100000000020350 >using <code data-hk=0000000100000000020340 >useState</code> like this is bad, and should throw a lint error</strong>:</p>
<figure data-hk=00000001000000000203a330 data-rehype-pretty-code-figure="" ><pre data-hk=00000001000000000203a320 style="backgroundColor:#282c34;color:#abb2bf" tabIndex="0" data-language="ts" data-theme="one-dark-pro" ><code data-hk=00000001000000000203a310 data-language="ts" data-theme="one-dark-pro" style="display:grid" ><span data-hk=00000001000000000203a120 data-line="" ><span data-hk=0000000100000000020370 style="color:#C678DD" >function</span><span data-hk=0000000100000000020380 style="color:#61AFEF" > Component</span><span data-hk=0000000100000000020390 style="color:#ABB2BF" >({ </span><span data-hk=00000001000000000203a100 style="color:#E06C75;fontStyle:italic" >someProp</span><span data-hk=00000001000000000203a110 style="color:#ABB2BF" > }) {</span></span>
<span data-hk=00000001000000000203a140 data-line="" data-highlighted-line="" ><span data-hk=00000001000000000203a130 style="color:#7F848E;fontStyle:italic" >	// ESLint error: initial state depends on a mutable value</span></span>
<span data-hk=00000001000000000203a260 data-line="" data-highlighted-line="" ><span data-hk=00000001000000000203a150 style="color:#C678DD" >	const</span><span data-hk=00000001000000000203a160 style="color:#ABB2BF" > [</span><span data-hk=00000001000000000203a170 style="color:#E5C07B" >state</span><span data-hk=00000001000000000203a180 style="color:#ABB2BF" >, </span><span data-hk=00000001000000000203a190 style="color:#E5C07B" >setState</span><span data-hk=00000001000000000203a200 style="color:#ABB2BF" >] </span><span data-hk=00000001000000000203a210 style="color:#56B6C2" >=</span><span data-hk=00000001000000000203a220 style="color:#61AFEF" > useState</span><span data-hk=00000001000000000203a230 style="color:#ABB2BF" >(</span><span data-hk=00000001000000000203a240 style="color:#E06C75" >someProp</span><span data-hk=00000001000000000203a250 style="color:#ABB2BF" >);</span></span>
<span data-hk=00000001000000000203a280 data-line="" ><span data-hk=00000001000000000203a270 style="color:#ABB2BF" >	...</span></span>
<span data-hk=00000001000000000203a300 data-line="" ><span data-hk=00000001000000000203a290 style="color:#ABB2BF" >}</span></span></code></pre></figure>
<p data-hk=00000001000000000203a370 >The second is that <strong data-hk=00000001000000000203a350 >derived state is <em data-hk=00000001000000000203a340 >sometimes</em> a valid approach to solving a problem</strong>, but <strong data-hk=00000001000000000203a360 >the escape hatches React suggests can be somewhat invasive and error-prone</strong>.</p>
<p data-hk=00000001000000000203a400 >The third is that <strong data-hk=00000001000000000203a390 >the "right" primitive for this would be a <code data-hk=00000001000000000203a380 >useState</code> hook that requires a dependency array</strong>. The title. We'll get to that eventually.</p>
<h2 data-hk=00000001000000000203a410 >useState as it exists now should not allow derived state</h2>
<p data-hk=00000001000000000203a420 >So, about that lint error I suggested. Maybe you've already identified the issue with the code above. If not, hopefully this demo illustrates it better:</p>
<div data-hk=00000001000000000203a43 class="w-full bg-white text-black p-4 rounded-lg _demoWrapper_ksh75_1"><noscript>Looks like you have JavaScript disabled. You'll probably want to enable it for this demo to work properly.</noscript><!--$--><!--/--></div>
<p data-hk=00000001000000000203a450 >When you change the "task" being edited, <strong data-hk=00000001000000000203a440 >the text in the input doesn't change to whatever the title for the new task is for.</strong></p>
<p data-hk=00000001000000000203a460 >But the text for the previous task you were editing before isn't relevant to the task you're editing now, right? Wouldn't you expect it to "reset" with the rest of the UI?</p>
<p data-hk=00000001000000000203a470 >Let's see if anything familiar comes up in the code for that edit panel:</p>
<figure data-hk=00000001000000000203b1300 data-rehype-pretty-code-figure="" ><pre data-hk=00000001000000000203b1290 style="backgroundColor:#282c34;color:#abb2bf" tabIndex="0" data-language="jsx" data-theme="one-dark-pro" ><code data-hk=00000001000000000203b1280 data-language="jsx" data-theme="one-dark-pro" style="display:grid" ><span data-hk=00000001000000000203a550 data-line="" ><span data-hk=00000001000000000203a480 style="color:#C678DD" >function</span><span data-hk=00000001000000000203a490 style="color:#61AFEF" > EditPanel</span><span data-hk=00000001000000000203a500 style="color:#ABB2BF" >({ </span><span data-hk=00000001000000000203a510 style="color:#E06C75;fontStyle:italic" >item</span><span data-hk=00000001000000000203a520 style="color:#ABB2BF" >, </span><span data-hk=00000001000000000203a530 style="color:#E06C75;fontStyle:italic" >saveName</span><span data-hk=00000001000000000203a540 style="color:#ABB2BF" > }) {</span></span>
<span data-hk=00000001000000000203a570 data-line="" data-highlighted-line="" ><span data-hk=00000001000000000203a560 style="color:#7F848E;fontStyle:italic" >	// This isn't reset when `item.name` changes!</span></span>
<span data-hk=00000001000000000203a710 data-line="" data-highlighted-line="" ><span data-hk=00000001000000000203a580 style="color:#C678DD" >	const</span><span data-hk=00000001000000000203a590 style="color:#ABB2BF" > [</span><span data-hk=00000001000000000203a600 style="color:#E5C07B" >name</span><span data-hk=00000001000000000203a610 style="color:#ABB2BF" >, </span><span data-hk=00000001000000000203a620 style="color:#E5C07B" >setName</span><span data-hk=00000001000000000203a630 style="color:#ABB2BF" >] </span><span data-hk=00000001000000000203a640 style="color:#56B6C2" >=</span><span data-hk=00000001000000000203a650 style="color:#61AFEF" > useState</span><span data-hk=00000001000000000203a660 style="color:#ABB2BF" >(</span><span data-hk=00000001000000000203a670 style="color:#E5C07B" >item</span><span data-hk=00000001000000000203a680 style="color:#ABB2BF" >.</span><span data-hk=00000001000000000203a690 style="color:#E06C75" >name</span><span data-hk=00000001000000000203a700 style="color:#ABB2BF" >);</span></span>
<span data-hk=00000001000000000203a740 data-line="" ><span data-hk=00000001000000000203a720 style="color:#C678DD" >	return</span><span data-hk=00000001000000000203a730 style="color:#ABB2BF" > (</span></span>
<span data-hk=00000001000000000203a780 data-line="" ><span data-hk=00000001000000000203a750 style="color:#ABB2BF" >		&lt;</span><span data-hk=00000001000000000203a760 style="color:#E06C75" >div</span><span data-hk=00000001000000000203a770 style="color:#ABB2BF" >></span></span>
<span data-hk=00000001000000000203b1030 data-line="" ><span data-hk=00000001000000000203a790 style="color:#ABB2BF" >			&lt;</span><span data-hk=00000001000000000203a800 style="color:#E06C75" >input</span><span data-hk=00000001000000000203a810 style="color:#D19A66;fontStyle:italic" > value</span><span data-hk=00000001000000000203a820 style="color:#56B6C2" >=</span><span data-hk=00000001000000000203a830 style="color:#C678DD" >{</span><span data-hk=00000001000000000203a840 style="color:#E06C75" >name</span><span data-hk=00000001000000000203a850 style="color:#C678DD" >}</span><span data-hk=00000001000000000203a860 style="color:#D19A66;fontStyle:italic" > onChange</span><span data-hk=00000001000000000203a870 style="color:#56B6C2" >=</span><span data-hk=00000001000000000203a880 style="color:#C678DD" >{</span><span data-hk=00000001000000000203a890 style="color:#ABB2BF" >(</span><span data-hk=00000001000000000203a900 style="color:#E06C75;fontStyle:italic" >e</span><span data-hk=00000001000000000203a910 style="color:#ABB2BF" >) </span><span data-hk=00000001000000000203a920 style="color:#C678DD" >=></span><span data-hk=00000001000000000203a930 style="color:#61AFEF" > setName</span><span data-hk=00000001000000000203a940 style="color:#ABB2BF" >(</span><span data-hk=00000001000000000203a950 style="color:#E5C07B" >e</span><span data-hk=00000001000000000203a960 style="color:#ABB2BF" >.</span><span data-hk=00000001000000000203a970 style="color:#E5C07B" >target</span><span data-hk=00000001000000000203a980 style="color:#ABB2BF" >.</span><span data-hk=00000001000000000203a990 style="color:#E06C75" >value</span><span data-hk=00000001000000000203b1000 style="color:#ABB2BF" >)</span><span data-hk=00000001000000000203b1010 style="color:#C678DD" >}</span><span data-hk=00000001000000000203b1020 style="color:#ABB2BF" > /></span></span>
<span data-hk=00000001000000000203b1190 data-line="" ><span data-hk=00000001000000000203b1040 style="color:#ABB2BF" >			&lt;</span><span data-hk=00000001000000000203b1050 style="color:#E06C75" >button</span><span data-hk=00000001000000000203b1060 style="color:#D19A66;fontStyle:italic" > onClick</span><span data-hk=00000001000000000203b1070 style="color:#56B6C2" >=</span><span data-hk=00000001000000000203b1080 style="color:#C678DD" >{</span><span data-hk=00000001000000000203b1090 style="color:#ABB2BF" >() </span><span data-hk=00000001000000000203b1100 style="color:#C678DD" >=></span><span data-hk=00000001000000000203b1110 style="color:#61AFEF" > saveName</span><span data-hk=00000001000000000203b1120 style="color:#ABB2BF" >(</span><span data-hk=00000001000000000203b1130 style="color:#E06C75" >name</span><span data-hk=00000001000000000203b1140 style="color:#ABB2BF" >)</span><span data-hk=00000001000000000203b1150 style="color:#C678DD" >}</span><span data-hk=00000001000000000203b1160 style="color:#ABB2BF" >>Save&lt;/</span><span data-hk=00000001000000000203b1170 style="color:#E06C75" >button</span><span data-hk=00000001000000000203b1180 style="color:#ABB2BF" >></span></span>
<span data-hk=00000001000000000203b1230 data-line="" ><span data-hk=00000001000000000203b1200 style="color:#ABB2BF" >		&lt;/</span><span data-hk=00000001000000000203b1210 style="color:#E06C75" >div</span><span data-hk=00000001000000000203b1220 style="color:#ABB2BF" >></span></span>
<span data-hk=00000001000000000203b1250 data-line="" ><span data-hk=00000001000000000203b1240 style="color:#ABB2BF" >	);</span></span>
<span data-hk=00000001000000000203b1270 data-line="" ><span data-hk=00000001000000000203b1260 style="color:#ABB2BF" >}</span></span></code></pre></figure>
<p data-hk=00000001000000000203b1330 ><strong data-hk=00000001000000000203b1320 >What we've done here is create <em data-hk=00000001000000000203b1310 >un</em>-reactive code by accident.</strong></p>
<p data-hk=00000001000000000203b1350 >Ideally, components should be dealing with the reality that a prop can change over time. But instead, we're taking a snapshot of only the <em data-hk=00000001000000000203b1340 >initial</em> value of a prop, and ignoring any changes.</p>
<p data-hk=00000001000000000203b1390 >It's a <a data-hk=00000001000000000203b1360 href="https://stackoverflow.com/questions/58288286/what-is-derived-state-in-react-and-why-is-it-important" >fairly common position</a> that deriving <em data-hk=00000001000000000203b1370 >any</em> mutable state from other state should be avoided where possible. In other words, you shouldn't be able to put a prop or some other piece of state inside a <code data-hk=00000001000000000203b1380 >useState</code> call. And I'd agree to an extent - so much so that I think that piece of code should warrant the death penalty, or at least a warning from ESLint. But there's no such warning, and I haven't been strapped to the electric chair just yet.</p>
<p data-hk=00000001000000000203b1400 >I've seen this problem come up way too often in production, and it's in no way exclusive to React - it's the reality of any moving part that is tied to another moving part, but also needs to move on its own for a while. You'll find the same problem in SolidJS, except...</p>
<figure data-hk=00000001000000000203b1690 data-rehype-pretty-code-figure="" ><pre data-hk=00000001000000000203b1680 style="backgroundColor:#282c34;color:#abb2bf" tabIndex="0" data-language="js" data-theme="one-dark-pro" ><code data-hk=00000001000000000203b1670 data-language="js" data-theme="one-dark-pro" style="display:grid" ><span data-hk=00000001000000000203b1460 data-line="" ><span data-hk=00000001000000000203b1410 style="color:#C678DD" >function</span><span data-hk=00000001000000000203b1420 style="color:#61AFEF" > SolidComponent</span><span data-hk=00000001000000000203b1430 style="color:#ABB2BF" >(</span><span data-hk=00000001000000000203b1440 style="color:#E06C75;fontStyle:italic" >props</span><span data-hk=00000001000000000203b1450 style="color:#ABB2BF" >) {</span></span>
<span data-hk=00000001000000000203b1480 data-line="" data-highlighted-line="" ><span data-hk=00000001000000000203b1470 style="color:#7F848E;fontStyle:italic" >	// ESLint error: The reactive variable 'props.someProp' should be used within JSX, a tracked scope (like</span></span>
<span data-hk=00000001000000000203b1500 data-line="" data-highlighted-line="" ><span data-hk=00000001000000000203b1490 style="color:#7F848E;fontStyle:italic" >	// createEffect), or inside an event handler function, or else changes will be ignored.</span></span>
<span data-hk=00000001000000000203b1640 data-line="" ><span data-hk=00000001000000000203b1510 style="color:#C678DD" >	const</span><span data-hk=00000001000000000203b1520 style="color:#ABB2BF" > [</span><span data-hk=00000001000000000203b1530 style="color:#E5C07B" >state</span><span data-hk=00000001000000000203b1540 style="color:#ABB2BF" >, </span><span data-hk=00000001000000000203b1550 style="color:#E5C07B" >setState</span><span data-hk=00000001000000000203b1560 style="color:#ABB2BF" >] </span><span data-hk=00000001000000000203b1570 style="color:#56B6C2" >=</span><span data-hk=00000001000000000203b1580 style="color:#61AFEF" > createSignal</span><span data-hk=00000001000000000203b1590 style="color:#ABB2BF" >(</span><span data-hk=00000001000000000203b1600 style="color:#E5C07B" >props</span><span data-hk=00000001000000000203b1610 style="color:#ABB2BF" >.</span><span data-hk=00000001000000000203b1620 style="color:#E06C75" >someProp</span><span data-hk=00000001000000000203b1630 style="color:#ABB2BF" >);</span></span>
<span data-hk=00000001000000000203b1660 data-line="" ><span data-hk=00000001000000000203b1650 style="color:#ABB2BF" >}</span></span></code></pre></figure>
<p data-hk=00000001000000000203b1710 >...Solid's recommended ESLint config <em data-hk=00000001000000000203b1700 >does</em> fire a warning for this!</p>
<p data-hk=00000001000000000203b1720 >So, I don't really see a reason why React's ESLint config shouldn't prohibit this.</p>
<h2 data-hk=00000001000000000203b1730 >Official workarounds</h2>
<p data-hk=00000001000000000203b1760 >React offers a few solutions to this problem, both in the old <a data-hk=00000001000000000203b1740 href="https://legacy.reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html" >"You Probably Don't Need Derived State"</a> article (pre-hooks!), and in the <a data-hk=00000001000000000203b1750 href="https://react.dev/reference/react/useState#resetting-state-with-a-key" >way more recent article on useState</a>.</p>
<p data-hk=00000001000000000203b1780 >First, if the derived state you're creating is read-only, i.e. is only written to when the source state changes - you don't need <code data-hk=00000001000000000203b1770 >useState</code> at all. You can just compute it directly like so:</p>
<figure data-hk=00000001000000000203b2110 data-rehype-pretty-code-figure="" ><pre data-hk=00000001000000000203b2100 style="backgroundColor:#282c34;color:#abb2bf" tabIndex="0" data-language="js" data-theme="one-dark-pro" ><code data-hk=00000001000000000203b2090 data-language="js" data-theme="one-dark-pro" style="display:grid" ><span data-hk=00000001000000000203b1840 data-line="" ><span data-hk=00000001000000000203b1790 style="color:#C678DD" >function</span><span data-hk=00000001000000000203b1800 style="color:#61AFEF" > Component</span><span data-hk=00000001000000000203b1810 style="color:#ABB2BF" >({ </span><span data-hk=00000001000000000203b1820 style="color:#E06C75;fontStyle:italic" >a</span><span data-hk=00000001000000000203b1830 style="color:#ABB2BF" > }) {</span></span>
<span data-hk=00000001000000000203b1960 data-line="" ><span data-hk=00000001000000000203b1850 style="color:#C678DD" >	const</span><span data-hk=00000001000000000203b1860 style="color:#ABB2BF" > [</span><span data-hk=00000001000000000203b1870 style="color:#E5C07B" >b</span><span data-hk=00000001000000000203b1880 style="color:#ABB2BF" >, </span><span data-hk=00000001000000000203b1890 style="color:#E5C07B" >setB</span><span data-hk=00000001000000000203b1900 style="color:#ABB2BF" >] </span><span data-hk=00000001000000000203b1910 style="color:#56B6C2" >=</span><span data-hk=00000001000000000203b1920 style="color:#61AFEF" > useState</span><span data-hk=00000001000000000203b1930 style="color:#ABB2BF" >(</span><span data-hk=00000001000000000203b1940 style="color:#D19A66" >0</span><span data-hk=00000001000000000203b1950 style="color:#ABB2BF" >);</span></span>
<span data-hk=00000001000000000203b2040 data-line="" ><span data-hk=00000001000000000203b1970 style="color:#C678DD" >	const</span><span data-hk=00000001000000000203b1980 style="color:#E5C07B" > sum</span><span data-hk=00000001000000000203b1990 style="color:#56B6C2" > =</span><span data-hk=00000001000000000203b2000 style="color:#E06C75" > a</span><span data-hk=00000001000000000203b2010 style="color:#56B6C2" > +</span><span data-hk=00000001000000000203b2020 style="color:#E06C75" > b</span><span data-hk=00000001000000000203b2030 style="color:#ABB2BF" >;</span></span>
<span data-hk=00000001000000000203b2060 data-line="" ><span data-hk=00000001000000000203b2050 style="color:#ABB2BF" >	...</span></span>
<span data-hk=00000001000000000203b2080 data-line="" ><span data-hk=00000001000000000203b2070 style="color:#ABB2BF" >}</span></span></code></pre></figure>
<p data-hk=00000001000000000203b2140 >Or, if you really don't want to re-compute it each render, and aren't using the new <a data-hk=00000001000000000203b2120 href="https://react.dev/learn/react-compiler" >React Compiler</a>, there's <code data-hk=00000001000000000203b2130 >useMemo</code>:</p>
<figure data-hk=00000001000000000203b2540 data-rehype-pretty-code-figure="" ><pre data-hk=00000001000000000203b2530 style="backgroundColor:#282c34;color:#abb2bf" tabIndex="0" data-language="js" data-theme="one-dark-pro" ><code data-hk=00000001000000000203b2520 data-language="js" data-theme="one-dark-pro" style="display:grid" ><span data-hk=00000001000000000203b2200 data-line="" ><span data-hk=00000001000000000203b2150 style="color:#C678DD" >function</span><span data-hk=00000001000000000203b2160 style="color:#61AFEF" > Component</span><span data-hk=00000001000000000203b2170 style="color:#ABB2BF" >({ </span><span data-hk=00000001000000000203b2180 style="color:#E06C75;fontStyle:italic" >a</span><span data-hk=00000001000000000203b2190 style="color:#ABB2BF" > }) {</span></span>
<span data-hk=00000001000000000203b2320 data-line="" ><span data-hk=00000001000000000203b2210 style="color:#C678DD" >	const</span><span data-hk=00000001000000000203b2220 style="color:#ABB2BF" > [</span><span data-hk=00000001000000000203b2230 style="color:#E5C07B" >b</span><span data-hk=00000001000000000203b2240 style="color:#ABB2BF" >, </span><span data-hk=00000001000000000203b2250 style="color:#E5C07B" >setB</span><span data-hk=00000001000000000203b2260 style="color:#ABB2BF" >] </span><span data-hk=00000001000000000203b2270 style="color:#56B6C2" >=</span><span data-hk=00000001000000000203b2280 style="color:#61AFEF" > useState</span><span data-hk=00000001000000000203b2290 style="color:#ABB2BF" >(</span><span data-hk=00000001000000000203b2300 style="color:#D19A66" >0</span><span data-hk=00000001000000000203b2310 style="color:#ABB2BF" >);</span></span>
<span data-hk=00000001000000000203b2470 data-line="" data-highlighted-line="" ><span data-hk=00000001000000000203b2330 style="color:#C678DD" >	const</span><span data-hk=00000001000000000203b2340 style="color:#E5C07B" > sum</span><span data-hk=00000001000000000203b2350 style="color:#56B6C2" > =</span><span data-hk=00000001000000000203b2360 style="color:#61AFEF" > useMemo</span><span data-hk=00000001000000000203b2370 style="color:#ABB2BF" >(() </span><span data-hk=00000001000000000203b2380 style="color:#C678DD" >=></span><span data-hk=00000001000000000203b2390 style="color:#E06C75" > a</span><span data-hk=00000001000000000203b2400 style="color:#56B6C2" > +</span><span data-hk=00000001000000000203b2410 style="color:#E06C75" > b</span><span data-hk=00000001000000000203b2420 style="color:#ABB2BF" >, [</span><span data-hk=00000001000000000203b2430 style="color:#E06C75" >a</span><span data-hk=00000001000000000203b2440 style="color:#ABB2BF" >, </span><span data-hk=00000001000000000203b2450 style="color:#E06C75" >b</span><span data-hk=00000001000000000203b2460 style="color:#ABB2BF" >]);</span></span>
<span data-hk=00000001000000000203b2490 data-line="" ><span data-hk=00000001000000000203b2480 style="color:#ABB2BF" >	...</span></span>
<span data-hk=00000001000000000203b2510 data-line="" ><span data-hk=00000001000000000203b2500 style="color:#ABB2BF" >}</span></span></code></pre></figure>
<p data-hk=00000001000000000203b2590 >It's the cases that can't be represented this way - cases that need <em data-hk=00000001000000000203b2550 >mutable</em> derived state - that get really messy. This tends to come up a lot when dealing with user input and optimistic updates (if you can't use <a data-hk=00000001000000000203b2570 href="https://react.dev/reference/react/useOptimistic" ><code data-hk=00000001000000000203b2560 >useOptimistic</code></a> or <a data-hk=00000001000000000203b2580 href="https://tanstack.com/query/latest" >Tanstack Query</a> for whatever reason).</p>
<p data-hk=00000001000000000203b2610 >Let's go back to the todo list example from before. The textbook way of fixing this is through the <code data-hk=00000001000000000203b2600 >key</code> prop, which exists on every React component. So, let's add that to where this component is used:</p>
<figure data-hk=00000001000000000203b2810 data-rehype-pretty-code-figure="" ><pre data-hk=00000001000000000203b2800 style="backgroundColor:#282c34;color:#abb2bf" tabIndex="0" data-language="jsx" data-theme="one-dark-pro" ><code data-hk=00000001000000000203b2790 data-language="jsx" data-theme="one-dark-pro" style="display:grid" ><span data-hk=00000001000000000203b2780 data-line="" ><span data-hk=00000001000000000203b2620 style="color:#ABB2BF" >&lt;</span><span data-hk=00000001000000000203b2630 style="color:#E5C07B" >EditPanel</span><span data-hk=00000001000000000203b2640 style="color:#D19A66;fontStyle:italic" > item</span><span data-hk=00000001000000000203b2650 style="color:#56B6C2" >=</span><span data-hk=00000001000000000203b2660 style="color:#C678DD" >{</span><span data-hk=00000001000000000203b2670 style="color:#E06C75" >items</span><span data-hk=00000001000000000203b2680 style="color:#ABB2BF" >[</span><span data-hk=00000001000000000203b2690 style="color:#E06C75" >selectedItemId</span><span data-hk=00000001000000000203b2700 style="color:#ABB2BF" >]</span><span data-hk=00000001000000000203b2710 style="color:#C678DD" >}</span><span data-hk=00000001000000000203b2720 style="color:#D19A66;fontStyle:italic" > key</span><span data-hk=00000001000000000203b2730 style="color:#56B6C2" >=</span><span data-hk=00000001000000000203b2740 style="color:#C678DD" >{</span><span data-hk=00000001000000000203b2750 style="color:#E06C75" >selectedItemId</span><span data-hk=00000001000000000203b2760 style="color:#C678DD" >}</span><span data-hk=00000001000000000203b2770 style="color:#ABB2BF" > /></span></span></code></pre></figure>
<div data-hk=00000001000000000203b282 class="w-full bg-white text-black p-4 rounded-lg _demoWrapper_ksh75_1"><noscript>Looks like you have JavaScript disabled. You'll probably want to enable it for this demo to work properly.</noscript><!--$--><!--/--></div>
<p data-hk=00000001000000000203b2830 >And it works - the input field changes when we edit a new task!</p>
<p data-hk=00000001000000000203b2850 >But we have to be careful with this - what if there's still some state that we want to <em data-hk=00000001000000000203b2840 >preserve</em>?</p>
<p data-hk=00000001000000000203b2870 >Call it contrived, but maybe we want to add <em data-hk=00000001000000000203b2860 >drawings</em> to our tasks. With different brush colours.</p>
<figure data-hk=00000001000000000203b3100 data-rehype-pretty-code-figure="" ><pre data-hk=00000001000000000203b3090 style="backgroundColor:#282c34;color:#abb2bf" tabIndex="0" data-language="js" data-theme="one-dark-pro" ><code data-hk=00000001000000000203b3080 data-language="js" data-theme="one-dark-pro" style="display:grid" ><span data-hk=00000001000000000203b2910 data-line="" ><span data-hk=00000001000000000203b2880 style="color:#C678DD" >function</span><span data-hk=00000001000000000203b2890 style="color:#61AFEF" > EditPanel</span><span data-hk=00000001000000000203b2900 style="color:#ABB2BF" >(...) {</span></span>
<span data-hk=00000001000000000203b3030 data-line="" data-highlighted-line="" ><span data-hk=00000001000000000203b2920 style="color:#C678DD" >	const</span><span data-hk=00000001000000000203b2930 style="color:#ABB2BF" > [</span><span data-hk=00000001000000000203b2940 style="color:#E5C07B" >brushColor</span><span data-hk=00000001000000000203b2950 style="color:#ABB2BF" >, </span><span data-hk=00000001000000000203b2960 style="color:#E5C07B" >setBrushColor</span><span data-hk=00000001000000000203b2970 style="color:#ABB2BF" >] </span><span data-hk=00000001000000000203b2980 style="color:#56B6C2" >=</span><span data-hk=00000001000000000203b2990 style="color:#61AFEF" > useState</span><span data-hk=00000001000000000203b3000 style="color:#ABB2BF" >(</span><span data-hk=00000001000000000203b3010 style="color:#98C379" >'black'</span><span data-hk=00000001000000000203b3020 style="color:#ABB2BF" >);</span></span>
<span data-hk=00000001000000000203b3050 data-line="" ><span data-hk=00000001000000000203b3040 style="color:#ABB2BF" >	...</span></span>
<span data-hk=00000001000000000203b3070 data-line="" ><span data-hk=00000001000000000203b3060 style="color:#ABB2BF" >}</span></span></code></pre></figure>
<div data-hk=00000001000000000203b311 class="w-full bg-white text-black p-4 rounded-lg _demoWrapper_ksh75_1"><noscript>Looks like you have JavaScript disabled. You'll probably want to enable it for this demo to work properly.</noscript><!--$--><!--/--></div>
<p data-hk=00000001000000000203b3130 ><strong data-hk=00000001000000000203b3120 >Try changing the brush colour before selecting another task.</strong></p>
<p data-hk=00000001000000000203b3140 >Why should the colour we're drawing with reset each time we change what task we're editing? That state might be part of the same component, but it shouldn't be joined to the specific task we're editing.</p>
<p data-hk=00000001000000000203b3180 >If <code data-hk=00000001000000000203b3150 >key</code> changes between renders, the entire component tree below that point is <em data-hk=00000001000000000203b3160 >"remounted"</em>. That means that the underlying DOM nodes will be re-created, and that <em data-hk=00000001000000000203b3170 >any</em> state declared below that point will be trashed and reset.</p>
<p data-hk=00000001000000000203b3210 >This is why we're now seeing that field reset as expected, and why we're seeing the chosen brush colour reset as <em data-hk=00000001000000000203b3190 >not</em> expected. We can't just reset state at the level of a single <code data-hk=00000001000000000203b3200 >useState</code> hook, or even a single component instance.</p>
<p data-hk=00000001000000000203b3240 >You might have also noticed that we're now passing on the responsibility of resetting this state to the <em data-hk=00000001000000000203b3220 >consumer</em> of this component. What if we end up using it elsewhere, but forget to provide a <code data-hk=00000001000000000203b3230 >key</code> prop? Also, what if you have more than one dependency that should cause a component to reset? You're going to need to merge those into a single key somehow.</p>
<p data-hk=00000001000000000203b3260 >So, sometimes forcing a remount with <code data-hk=00000001000000000203b3250 >key</code> is absolutely the right option, but there's cases where it's too much of an ask.</p>
<p data-hk=00000001000000000203b3280 >For those cases, <a data-hk=00000001000000000203b3270 href="https://react.dev/reference/react/useState#storing-information-from-previous-renders" >the React docs provides a pattern that's a bit more isolated</a>:</p>
<figure data-hk=00000001000000000203b4230 data-rehype-pretty-code-figure="" ><pre data-hk=00000001000000000203b4220 style="backgroundColor:#282c34;color:#abb2bf" tabIndex="0" data-language="js" data-theme="one-dark-pro" ><code data-hk=00000001000000000203b4210 data-language="js" data-theme="one-dark-pro" style="display:grid" ><span data-hk=00000001000000000203b3360 data-line="" ><span data-hk=00000001000000000203b3290 style="color:#C678DD" >export</span><span data-hk=00000001000000000203b3300 style="color:#C678DD" > default</span><span data-hk=00000001000000000203b3310 style="color:#C678DD" > function</span><span data-hk=00000001000000000203b3320 style="color:#61AFEF" > CountLabel</span><span data-hk=00000001000000000203b3330 style="color:#ABB2BF" >({ </span><span data-hk=00000001000000000203b3340 style="color:#E06C75;fontStyle:italic" >count</span><span data-hk=00000001000000000203b3350 style="color:#ABB2BF" > }) {</span></span>
<span data-hk=00000001000000000203b3480 data-line="" ><span data-hk=00000001000000000203b3370 style="color:#C678DD" >  const</span><span data-hk=00000001000000000203b3380 style="color:#ABB2BF" > [</span><span data-hk=00000001000000000203b3390 style="color:#E5C07B" >prevCount</span><span data-hk=00000001000000000203b3400 style="color:#ABB2BF" >, </span><span data-hk=00000001000000000203b3410 style="color:#E5C07B" >setPrevCount</span><span data-hk=00000001000000000203b3420 style="color:#ABB2BF" >] </span><span data-hk=00000001000000000203b3430 style="color:#56B6C2" >=</span><span data-hk=00000001000000000203b3440 style="color:#61AFEF" > useState</span><span data-hk=00000001000000000203b3450 style="color:#ABB2BF" >(</span><span data-hk=00000001000000000203b3460 style="color:#E06C75" >count</span><span data-hk=00000001000000000203b3470 style="color:#ABB2BF" >);</span></span>
<span data-hk=00000001000000000203b3600 data-line="" ><span data-hk=00000001000000000203b3490 style="color:#C678DD" >  const</span><span data-hk=00000001000000000203b3500 style="color:#ABB2BF" > [</span><span data-hk=00000001000000000203b3510 style="color:#E5C07B" >trend</span><span data-hk=00000001000000000203b3520 style="color:#ABB2BF" >, </span><span data-hk=00000001000000000203b3530 style="color:#E5C07B" >setTrend</span><span data-hk=00000001000000000203b3540 style="color:#ABB2BF" >] </span><span data-hk=00000001000000000203b3550 style="color:#56B6C2" >=</span><span data-hk=00000001000000000203b3560 style="color:#61AFEF" > useState</span><span data-hk=00000001000000000203b3570 style="color:#ABB2BF" >(</span><span data-hk=00000001000000000203b3580 style="color:#D19A66" >null</span><span data-hk=00000001000000000203b3590 style="color:#ABB2BF" >);</span></span>
<span data-hk=00000001000000000203b3670 data-line="" ><span data-hk=00000001000000000203b3610 style="color:#C678DD" >  if</span><span data-hk=00000001000000000203b3620 style="color:#ABB2BF" > (</span><span data-hk=00000001000000000203b3630 style="color:#E06C75" >prevCount</span><span data-hk=00000001000000000203b3640 style="color:#56B6C2" > !==</span><span data-hk=00000001000000000203b3650 style="color:#E06C75" > count</span><span data-hk=00000001000000000203b3660 style="color:#ABB2BF" >) {</span></span>
<span data-hk=00000001000000000203b3720 data-line="" ><span data-hk=00000001000000000203b3680 style="color:#61AFEF" >    setPrevCount</span><span data-hk=00000001000000000203b3690 style="color:#ABB2BF" >(</span><span data-hk=00000001000000000203b3700 style="color:#E06C75" >count</span><span data-hk=00000001000000000203b3710 style="color:#ABB2BF" >);</span></span>
<span data-hk=00000001000000000203b3830 data-line="" ><span data-hk=00000001000000000203b3730 style="color:#61AFEF" >    setTrend</span><span data-hk=00000001000000000203b3740 style="color:#ABB2BF" >(</span><span data-hk=00000001000000000203b3750 style="color:#E06C75" >count</span><span data-hk=00000001000000000203b3760 style="color:#56B6C2" > ></span><span data-hk=00000001000000000203b3770 style="color:#E06C75" > prevCount</span><span data-hk=00000001000000000203b3780 style="color:#C678DD" > ?</span><span data-hk=00000001000000000203b3790 style="color:#98C379" > 'increasing'</span><span data-hk=00000001000000000203b3800 style="color:#C678DD" > :</span><span data-hk=00000001000000000203b3810 style="color:#98C379" > 'decreasing'</span><span data-hk=00000001000000000203b3820 style="color:#ABB2BF" >);</span></span>
<span data-hk=00000001000000000203b3850 data-line="" ><span data-hk=00000001000000000203b3840 style="color:#ABB2BF" >  }</span></span>
<span data-hk=00000001000000000203b3880 data-line="" ><span data-hk=00000001000000000203b3860 style="color:#C678DD" >  return</span><span data-hk=00000001000000000203b3870 style="color:#ABB2BF" > (</span></span>
<span data-hk=00000001000000000203b3900 data-line="" ><span data-hk=00000001000000000203b3890 style="color:#ABB2BF" >    &lt;></span></span>
<span data-hk=00000001000000000203b4000 data-line="" ><span data-hk=00000001000000000203b3910 style="color:#ABB2BF" >      &lt;</span><span data-hk=00000001000000000203b3920 style="color:#E06C75" >h1</span><span data-hk=00000001000000000203b3930 style="color:#ABB2BF" >></span><span data-hk=00000001000000000203b3940 style="color:#C678DD" >{</span><span data-hk=00000001000000000203b3950 style="color:#E06C75" >count</span><span data-hk=00000001000000000203b3960 style="color:#C678DD" >}</span><span data-hk=00000001000000000203b3970 style="color:#ABB2BF" >&lt;/</span><span data-hk=00000001000000000203b3980 style="color:#E06C75" >h1</span><span data-hk=00000001000000000203b3990 style="color:#ABB2BF" >></span></span>
<span data-hk=00000001000000000203b4140 data-line="" ><span data-hk=00000001000000000203b4010 style="color:#C678DD" >      {</span><span data-hk=00000001000000000203b4020 style="color:#E06C75" >trend</span><span data-hk=00000001000000000203b4030 style="color:#56B6C2" > &amp;&amp;</span><span data-hk=00000001000000000203b4040 style="color:#ABB2BF" > &lt;</span><span data-hk=00000001000000000203b4050 style="color:#E06C75" >p</span><span data-hk=00000001000000000203b4060 style="color:#ABB2BF" >>The count is </span><span data-hk=00000001000000000203b4070 style="color:#C678DD" >{</span><span data-hk=00000001000000000203b4080 style="color:#E06C75" >trend</span><span data-hk=00000001000000000203b4090 style="color:#C678DD" >}</span><span data-hk=00000001000000000203b4100 style="color:#ABB2BF" >&lt;/</span><span data-hk=00000001000000000203b4110 style="color:#E06C75" >p</span><span data-hk=00000001000000000203b4120 style="color:#ABB2BF" >></span><span data-hk=00000001000000000203b4130 style="color:#C678DD" >}</span></span>
<span data-hk=00000001000000000203b4160 data-line="" ><span data-hk=00000001000000000203b4150 style="color:#ABB2BF" >    &lt;/></span></span>
<span data-hk=00000001000000000203b4180 data-line="" ><span data-hk=00000001000000000203b4170 style="color:#ABB2BF" >  );</span></span>
<span data-hk=00000001000000000203b4200 data-line="" ><span data-hk=00000001000000000203b4190 style="color:#ABB2BF" >}</span></span></code></pre></figure>
<p data-hk=00000001000000000203b4260 >The nicest thing I can say about this is that it works - this <em data-hk=00000001000000000203b4240 >would</em> force only the state we specify to reset. And at the very least, React <em data-hk=00000001000000000203b4250 >does</em> prevent Effects from running and children from re-rendering if all a render here does is trigger another render.</p>
<p data-hk=00000001000000000203b4280 >But despite this pattern only being applied to <em data-hk=00000001000000000203b4270 >one</em> value, it already looks quite janky. We now have to manage previous state, and there's a lot of room for things to go wrong. Maybe our condition gets us stuck in an infinite loop, or maybe we accidentally omit a dependency that we should be listening to.</p>
<p data-hk=00000001000000000203b4300 >Now, what I've seen more in practice is code that looks like this, which definitely <em data-hk=00000001000000000203b4290 >seems</em> more elegant:</p>
<figure data-hk=00000001000000000203b4730 data-rehype-pretty-code-figure="" ><pre data-hk=00000001000000000203b4720 style="backgroundColor:#282c34;color:#abb2bf" tabIndex="0" data-language="jsx" data-theme="one-dark-pro" ><code data-hk=00000001000000000203b4710 data-language="jsx" data-theme="one-dark-pro" style="display:grid" ><span data-hk=00000001000000000203b4360 data-line="" ><span data-hk=00000001000000000203b4310 style="color:#C678DD" >function</span><span data-hk=00000001000000000203b4320 style="color:#61AFEF" > EditPanel</span><span data-hk=00000001000000000203b4330 style="color:#ABB2BF" >({ </span><span data-hk=00000001000000000203b4340 style="color:#E06C75;fontStyle:italic" >item</span><span data-hk=00000001000000000203b4350 style="color:#ABB2BF" >, ... }) {</span></span>
<span data-hk=00000001000000000203b4500 data-line="" ><span data-hk=00000001000000000203b4370 style="color:#C678DD" >	const</span><span data-hk=00000001000000000203b4380 style="color:#ABB2BF" > [</span><span data-hk=00000001000000000203b4390 style="color:#E5C07B" >name</span><span data-hk=00000001000000000203b4400 style="color:#ABB2BF" >, </span><span data-hk=00000001000000000203b4410 style="color:#E5C07B" >setName</span><span data-hk=00000001000000000203b4420 style="color:#ABB2BF" >] </span><span data-hk=00000001000000000203b4430 style="color:#56B6C2" >=</span><span data-hk=00000001000000000203b4440 style="color:#61AFEF" > useState</span><span data-hk=00000001000000000203b4450 style="color:#ABB2BF" >(</span><span data-hk=00000001000000000203b4460 style="color:#E5C07B" >item</span><span data-hk=00000001000000000203b4470 style="color:#ABB2BF" >.</span><span data-hk=00000001000000000203b4480 style="color:#E06C75" >name</span><span data-hk=00000001000000000203b4490 style="color:#ABB2BF" >);</span></span>
<span data-hk=00000001000000000203b4550 data-line="" data-highlighted-line="" ><span data-hk=00000001000000000203b4510 style="color:#61AFEF" >	useEffect</span><span data-hk=00000001000000000203b4520 style="color:#ABB2BF" >(() </span><span data-hk=00000001000000000203b4530 style="color:#C678DD" >=></span><span data-hk=00000001000000000203b4540 style="color:#ABB2BF" > {</span></span>
<span data-hk=00000001000000000203b4620 data-line="" data-highlighted-line="" ><span data-hk=00000001000000000203b4560 style="color:#61AFEF" >		setName</span><span data-hk=00000001000000000203b4570 style="color:#ABB2BF" >(</span><span data-hk=00000001000000000203b4580 style="color:#E5C07B" >item</span><span data-hk=00000001000000000203b4590 style="color:#ABB2BF" >.</span><span data-hk=00000001000000000203b4600 style="color:#E06C75" >name</span><span data-hk=00000001000000000203b4610 style="color:#ABB2BF" >);</span></span>
<span data-hk=00000001000000000203b4680 data-line="" data-highlighted-line="" ><span data-hk=00000001000000000203b4630 style="color:#ABB2BF" >	}, [</span><span data-hk=00000001000000000203b4640 style="color:#E5C07B" >item</span><span data-hk=00000001000000000203b4650 style="color:#ABB2BF" >.</span><span data-hk=00000001000000000203b4660 style="color:#E06C75" >name</span><span data-hk=00000001000000000203b4670 style="color:#ABB2BF" >]);</span></span>
<span data-hk=00000001000000000203b4700 data-line="" ><span data-hk=00000001000000000203b4690 style="color:#ABB2BF" >...</span></span></code></pre></figure>
<p data-hk=00000001000000000203b4740 >But this introduces an unnecessary re-render. What's even worse is the fact that the first re-render has a mix of stale and non-stale data, leading to potentially dangerous behaviour with other useEffects:</p>
<figure data-hk=00000001000000000203b5200 data-rehype-pretty-code-figure="" ><pre data-hk=00000001000000000203b5190 style="backgroundColor:#282c34;color:#abb2bf" tabIndex="0" data-language="jsx" data-theme="one-dark-pro" ><code data-hk=00000001000000000203b5180 data-language="jsx" data-theme="one-dark-pro" style="display:grid" ><span data-hk=00000001000000000203b4800 data-line="" ><span data-hk=00000001000000000203b4750 style="color:#C678DD" >function</span><span data-hk=00000001000000000203b4760 style="color:#61AFEF" > EditPanel</span><span data-hk=00000001000000000203b4770 style="color:#ABB2BF" >({ </span><span data-hk=00000001000000000203b4780 style="color:#E06C75;fontStyle:italic" >item</span><span data-hk=00000001000000000203b4790 style="color:#ABB2BF" >, ... }) {</span></span>
<span data-hk=00000001000000000203b4820 data-line="" ><span data-hk=00000001000000000203b4810 style="color:#ABB2BF" >...</span></span>
<span data-hk=00000001000000000203b4870 data-line="" ><span data-hk=00000001000000000203b4830 style="color:#61AFEF" >	useEffect</span><span data-hk=00000001000000000203b4840 style="color:#ABB2BF" >(() </span><span data-hk=00000001000000000203b4850 style="color:#C678DD" >=></span><span data-hk=00000001000000000203b4860 style="color:#ABB2BF" > {</span></span>
<span data-hk=00000001000000000203b5000 data-line="" data-highlighted-line="" ><span data-hk=00000001000000000203b4880 style="color:#E5C07B" >		someDatabase</span><span data-hk=00000001000000000203b4890 style="color:#ABB2BF" >.</span><span data-hk=00000001000000000203b4900 style="color:#61AFEF" >sync</span><span data-hk=00000001000000000203b4910 style="color:#ABB2BF" >({ </span><span data-hk=00000001000000000203b4920 style="color:#E06C75" >id</span><span data-hk=00000001000000000203b4930 style="color:#ABB2BF" >: </span><span data-hk=00000001000000000203b4940 style="color:#E5C07B" >item</span><span data-hk=00000001000000000203b4950 style="color:#ABB2BF" >.</span><span data-hk=00000001000000000203b4960 style="color:#E06C75" >id</span><span data-hk=00000001000000000203b4970 style="color:#ABB2BF" >, </span><span data-hk=00000001000000000203b4980 style="color:#E06C75" >name</span><span data-hk=00000001000000000203b4990 style="color:#ABB2BF" > });</span></span>
<span data-hk=00000001000000000203b5080 data-line="" ><span data-hk=00000001000000000203b5010 style="color:#ABB2BF" >	}, [</span><span data-hk=00000001000000000203b5020 style="color:#E5C07B" >item</span><span data-hk=00000001000000000203b5030 style="color:#ABB2BF" >.</span><span data-hk=00000001000000000203b5040 style="color:#E06C75" >id</span><span data-hk=00000001000000000203b5050 style="color:#ABB2BF" >, </span><span data-hk=00000001000000000203b5060 style="color:#E06C75" >name</span><span data-hk=00000001000000000203b5070 style="color:#ABB2BF" >]);</span></span>
<span data-hk=00000001000000000203b5100 data-line="" data-highlighted-line="" ><span data-hk=00000001000000000203b5090 style="color:#7F848E;fontStyle:italic" >	// Runs twice when item.id changes:</span></span>
<span data-hk=00000001000000000203b5120 data-line="" data-highlighted-line="" ><span data-hk=00000001000000000203b5110 style="color:#7F848E;fontStyle:italic" >	// 1. someDatabase.sync({ id: 'Second item ID', name: 'First item name' }) (incorrect!)</span></span>
<span data-hk=00000001000000000203b5140 data-line="" data-highlighted-line="" ><span data-hk=00000001000000000203b5130 style="color:#7F848E;fontStyle:italic" >	// 2. someDatabase.sync({ id: 'Second item ID', name: 'Second item name' })</span></span>
<span data-hk=00000001000000000203b5160 data-line="" ><span data-hk=00000001000000000203b5150 style="color:#ABB2BF" >...</span></span>
<span data-hk=00000001000000000203b5170 data-line="" > </span></code></pre></figure>
<h2 data-hk=00000001000000000203b5210 >We need better primitives for mutable derived state</h2>
<p data-hk=00000001000000000203b5240 >In my opinion, these workarounds are far more complex than just having proper tools for mutable derived state. And these days, at least <a data-hk=00000001000000000203b5220 href="https://svelte.dev/docs/svelte/$derived" >Svelte</a> and <a data-hk=00000001000000000203b5230 href="https://dev.to/this-is-learning/mutable-derivations-in-reactivity-2ffl" >SolidJS</a> seem to agree.</p>
<p data-hk=00000001000000000203b5260 >Let's look at the <code data-hk=00000001000000000203b5250 >createWritable</code> "hook" being proposed for Solid. Its implementation is actually fairly simple, and reveals a lot about its expected behaviour.</p>
<p data-hk=00000001000000000203b5270 >Some context:</p>
<ul data-hk=00000001000000000203b5360 >
<li data-hk=00000001000000000203b5290 >Solid components only render once, so instead of "hooks" you just have factory functions that usually start with <code data-hk=00000001000000000203b5280 >create</code>.</li>
<li data-hk=00000001000000000203b5320 ><code data-hk=00000001000000000203b5300 >createSignal</code> is basically just <code data-hk=00000001000000000203b5310 >useState</code>.</li>
<li data-hk=00000001000000000203b5350 ><code data-hk=00000001000000000203b5330 >createMemo</code> is basically just <code data-hk=00000001000000000203b5340 >useMemo</code>, but automatically derives its dependencies instead of requiring a dependency array.</li>
</ul>
<figure data-hk=00000001000000000203b5880 data-rehype-pretty-code-figure="" ><pre data-hk=00000001000000000203b5870 style="backgroundColor:#282c34;color:#abb2bf" tabIndex="0" data-language="js" data-theme="one-dark-pro" ><code data-hk=00000001000000000203b5860 data-language="js" data-theme="one-dark-pro" style="display:grid" ><span data-hk=00000001000000000203b5400 data-line="" ><span data-hk=00000001000000000203b5370 style="color:#C678DD" >function</span><span data-hk=00000001000000000203b5380 style="color:#61AFEF" > createWritable</span><span data-hk=00000001000000000203b5390 style="color:#ABB2BF" >(</span></span>
<span data-hk=00000001000000000203b5420 data-line="" ><span data-hk=00000001000000000203b5410 style="color:#7F848E;fontStyle:italic" >	// Function for computing "initial" state</span></span>
<span data-hk=00000001000000000203b5450 data-line="" ><span data-hk=00000001000000000203b5430 style="color:#E06C75;fontStyle:italic" >	fn</span><span data-hk=00000001000000000203b5440 style="color:#ABB2BF" >,</span></span>
<span data-hk=00000001000000000203b5470 data-line="" ><span data-hk=00000001000000000203b5460 style="color:#ABB2BF" >) {</span></span>
<span data-hk=00000001000000000203b5490 data-line="" ><span data-hk=00000001000000000203b5480 style="color:#7F848E;fontStyle:italic" >  // When dependencies used by `fn` change, the memoized state is </span></span>
<span data-hk=00000001000000000203b5510 data-line="" ><span data-hk=00000001000000000203b5500 style="color:#7F848E;fontStyle:italic" >  // discarded and recomputed</span></span>
<span data-hk=00000001000000000203b5620 data-line="" ><span data-hk=00000001000000000203b5520 style="color:#C678DD" >  const</span><span data-hk=00000001000000000203b5530 style="color:#E5C07B" > computed</span><span data-hk=00000001000000000203b5540 style="color:#56B6C2" > =</span><span data-hk=00000001000000000203b5550 style="color:#61AFEF" > createMemo</span><span data-hk=00000001000000000203b5560 style="color:#ABB2BF" >(() </span><span data-hk=00000001000000000203b5570 style="color:#C678DD" >=></span><span data-hk=00000001000000000203b5580 style="color:#61AFEF" > createSignal</span><span data-hk=00000001000000000203b5590 style="color:#ABB2BF" >(</span><span data-hk=00000001000000000203b5600 style="color:#61AFEF" >fn</span><span data-hk=00000001000000000203b5610 style="color:#ABB2BF" >()))</span></span>
<span data-hk=00000001000000000203b5640 data-line="" ><span data-hk=00000001000000000203b5630 style="color:#7F848E;fontStyle:italic" >  // This looks scary, but it's basically just returning the getters</span></span>
<span data-hk=00000001000000000203b5660 data-line="" ><span data-hk=00000001000000000203b5650 style="color:#7F848E;fontStyle:italic" >  // and setters from the state declared above</span></span>
<span data-hk=00000001000000000203b5830 data-line="" ><span data-hk=00000001000000000203b5670 style="color:#C678DD" >  return</span><span data-hk=00000001000000000203b5680 style="color:#ABB2BF" > [() </span><span data-hk=00000001000000000203b5690 style="color:#C678DD" >=></span><span data-hk=00000001000000000203b5700 style="color:#61AFEF" > computed</span><span data-hk=00000001000000000203b5710 style="color:#ABB2BF" >()[</span><span data-hk=00000001000000000203b5720 style="color:#D19A66" >0</span><span data-hk=00000001000000000203b5730 style="color:#ABB2BF" >](), (</span><span data-hk=00000001000000000203b5740 style="color:#E06C75;fontStyle:italic" >v</span><span data-hk=00000001000000000203b5750 style="color:#ABB2BF" >) </span><span data-hk=00000001000000000203b5760 style="color:#C678DD" >=></span><span data-hk=00000001000000000203b5770 style="color:#61AFEF" > computed</span><span data-hk=00000001000000000203b5780 style="color:#ABB2BF" >()[</span><span data-hk=00000001000000000203b5790 style="color:#D19A66" >1</span><span data-hk=00000001000000000203b5800 style="color:#ABB2BF" >](</span><span data-hk=00000001000000000203b5810 style="color:#E06C75" >v</span><span data-hk=00000001000000000203b5820 style="color:#ABB2BF" >))]</span></span>
<span data-hk=00000001000000000203b5850 data-line="" ><span data-hk=00000001000000000203b5840 style="color:#ABB2BF" >}</span></span></code></pre></figure>
<p data-hk=00000001000000000203b5910 >What this returns is state that is <em data-hk=00000001000000000203b5890 >memoized</em> by whatever dependencies were used to create that state. Just like Svelte's <code data-hk=00000001000000000203b5900 >$derived</code>, that state can change over the lifetime of its dependencies - but once one of those dependencies changes, that state is trashed and re-computed.</p>
<p data-hk=00000001000000000203b5950 >I'm only using Solid's implementation as an example here because implementing a hook like this in React is actually quite annoying. For starters, <a data-hk=00000001000000000203b5920 href="https://react.dev/reference/rules/rules-of-hooks#only-call-hooks-at-the-top-level" >Rules of Hooks</a> prevent you from nesting a <code data-hk=00000001000000000203b5930 >useState</code> inside a <code data-hk=00000001000000000203b5940 >useMemo</code>.</p>
<p data-hk=00000001000000000203b5970 >But React implementations of this concept do exist, such as <a data-hk=00000001000000000203b5960 href="https://react.dev/reference/react/useState#storing-information-from-previous-renders" >use-state-with-deps</a>. Let's give it a shot.</p>
<figure data-hk=00000001000000000203b6370 data-rehype-pretty-code-figure="" ><pre data-hk=00000001000000000203b6360 style="backgroundColor:#282c34;color:#abb2bf" tabIndex="0" data-language="jsx" data-theme="one-dark-pro" ><code data-hk=00000001000000000203b6350 data-language="jsx" data-theme="one-dark-pro" style="display:grid" ><span data-hk=00000001000000000203b6070 data-line="" data-highlighted-line="" ><span data-hk=00000001000000000203b5980 style="color:#C678DD" >import</span><span data-hk=00000001000000000203b5990 style="color:#ABB2BF" > { </span><span data-hk=00000001000000000203b6000 style="color:#E06C75" >useStateWithDeps</span><span data-hk=00000001000000000203b6010 style="color:#C678DD" > as</span><span data-hk=00000001000000000203b6020 style="color:#E06C75" > useState</span><span data-hk=00000001000000000203b6030 style="color:#ABB2BF" > } </span><span data-hk=00000001000000000203b6040 style="color:#C678DD" >from</span><span data-hk=00000001000000000203b6050 style="color:#98C379" > 'use-state-with-deps'</span><span data-hk=00000001000000000203b6060 style="color:#ABB2BF" >;</span></span>
<span data-hk=00000001000000000203b6080 data-line="" > </span>
<span data-hk=00000001000000000203b6140 data-line="" ><span data-hk=00000001000000000203b6090 style="color:#C678DD" >function</span><span data-hk=00000001000000000203b6100 style="color:#61AFEF" > EditPanel</span><span data-hk=00000001000000000203b6110 style="color:#ABB2BF" >({ </span><span data-hk=00000001000000000203b6120 style="color:#E06C75;fontStyle:italic" >item</span><span data-hk=00000001000000000203b6130 style="color:#ABB2BF" >, ... }) {</span></span>
<span data-hk=00000001000000000203b6300 data-line="" data-highlighted-line="" ><span data-hk=00000001000000000203b6150 style="color:#C678DD" >	const</span><span data-hk=00000001000000000203b6160 style="color:#ABB2BF" > [</span><span data-hk=00000001000000000203b6170 style="color:#E5C07B" >name</span><span data-hk=00000001000000000203b6180 style="color:#ABB2BF" >, </span><span data-hk=00000001000000000203b6190 style="color:#E5C07B" >setName</span><span data-hk=00000001000000000203b6200 style="color:#ABB2BF" >] </span><span data-hk=00000001000000000203b6210 style="color:#56B6C2" >=</span><span data-hk=00000001000000000203b6220 style="color:#61AFEF" > useState</span><span data-hk=00000001000000000203b6230 style="color:#ABB2BF" >(</span><span data-hk=00000001000000000203b6240 style="color:#E5C07B" >item</span><span data-hk=00000001000000000203b6250 style="color:#ABB2BF" >.</span><span data-hk=00000001000000000203b6260 style="color:#E06C75" >name</span><span data-hk=00000001000000000203b6270 style="color:#ABB2BF" >, [</span><span data-hk=00000001000000000203b6280 style="color:#E06C75" >item</span><span data-hk=00000001000000000203b6290 style="color:#ABB2BF" >]);</span></span>
<span data-hk=00000001000000000203b6320 data-line="" ><span data-hk=00000001000000000203b6310 style="color:#ABB2BF" >	...</span></span>
<span data-hk=00000001000000000203b6340 data-line="" ><span data-hk=00000001000000000203b6330 style="color:#ABB2BF" >}</span></span></code></pre></figure>
<div data-hk=00000001000000000203b638 class="w-full bg-white text-black p-4 rounded-lg _demoWrapper_ksh75_1"><noscript>Looks like you have JavaScript disabled. You'll probably want to enable it for this demo to work properly.</noscript><!--$--><!--/--></div>
<p data-hk=00000001000000000203b6410 >No messing with <code data-hk=00000001000000000203b6390 >key</code>, weird setter calls in the render method, or <code data-hk=00000001000000000203b6400 >useEffect</code> - it just kinda works.</p>
<p data-hk=00000001000000000203b6440 >What I'm proposing is that <strong data-hk=00000001000000000203b6430 >this becomes how <code data-hk=00000001000000000203b6420 >useState</code> works by default</strong>.</p>
<p data-hk=00000001000000000203b6450 >Remember that ESLint error I proposed further up? Maybe it should look more like this:</p>
<figure data-hk=00000001000000000203b6720 data-rehype-pretty-code-figure="" ><pre data-hk=00000001000000000203b6710 style="backgroundColor:#282c34;color:#abb2bf" tabIndex="0" data-language="ts" data-theme="one-dark-pro" ><code data-hk=00000001000000000203b6700 data-language="ts" data-theme="one-dark-pro" style="display:grid" ><span data-hk=00000001000000000203b6510 data-line="" ><span data-hk=00000001000000000203b6460 style="color:#C678DD" >function</span><span data-hk=00000001000000000203b6470 style="color:#61AFEF" > Component</span><span data-hk=00000001000000000203b6480 style="color:#ABB2BF" >({ </span><span data-hk=00000001000000000203b6490 style="color:#E06C75;fontStyle:italic" >someProp</span><span data-hk=00000001000000000203b6500 style="color:#ABB2BF" > }) {</span></span>
<span data-hk=00000001000000000203b6530 data-line="" data-highlighted-line="" ><span data-hk=00000001000000000203b6520 style="color:#7F848E;fontStyle:italic" >	// ESLint error: someProp not specified in dependency array</span></span>
<span data-hk=00000001000000000203b6650 data-line="" data-highlighted-line="" ><span data-hk=00000001000000000203b6540 style="color:#C678DD" >	const</span><span data-hk=00000001000000000203b6550 style="color:#ABB2BF" > [</span><span data-hk=00000001000000000203b6560 style="color:#E5C07B" >state</span><span data-hk=00000001000000000203b6570 style="color:#ABB2BF" >, </span><span data-hk=00000001000000000203b6580 style="color:#E5C07B" >setState</span><span data-hk=00000001000000000203b6590 style="color:#ABB2BF" >] </span><span data-hk=00000001000000000203b6600 style="color:#56B6C2" >=</span><span data-hk=00000001000000000203b6610 style="color:#61AFEF" > useState</span><span data-hk=00000001000000000203b6620 style="color:#ABB2BF" >(</span><span data-hk=00000001000000000203b6630 style="color:#E06C75" >someProp</span><span data-hk=00000001000000000203b6640 style="color:#ABB2BF" >);</span></span>
<span data-hk=00000001000000000203b6670 data-line="" ><span data-hk=00000001000000000203b6660 style="color:#ABB2BF" >	...</span></span>
<span data-hk=00000001000000000203b6690 data-line="" ><span data-hk=00000001000000000203b6680 style="color:#ABB2BF" >}</span></span></code></pre></figure>
<p data-hk=00000001000000000203b6730 >...and be fixed like so:</p>
<figure data-hk=00000001000000000203b7020 data-rehype-pretty-code-figure="" ><pre data-hk=00000001000000000203b7010 style="backgroundColor:#282c34;color:#abb2bf" tabIndex="0" data-language="js" data-theme="one-dark-pro" ><code data-hk=00000001000000000203b7000 data-language="js" data-theme="one-dark-pro" style="display:grid" ><span data-hk=00000001000000000203b6790 data-line="" ><span data-hk=00000001000000000203b6740 style="color:#C678DD" >function</span><span data-hk=00000001000000000203b6750 style="color:#61AFEF" > Component</span><span data-hk=00000001000000000203b6760 style="color:#ABB2BF" >({ </span><span data-hk=00000001000000000203b6770 style="color:#E06C75;fontStyle:italic" >someProp</span><span data-hk=00000001000000000203b6780 style="color:#ABB2BF" > }) {</span></span>
<span data-hk=00000001000000000203b6810 data-line="" data-highlighted-line="" ><span data-hk=00000001000000000203b6800 style="color:#7F848E;fontStyle:italic" >	// No error!</span></span>
<span data-hk=00000001000000000203b6950 data-line="" data-highlighted-line="" ><span data-hk=00000001000000000203b6820 style="color:#C678DD" >	const</span><span data-hk=00000001000000000203b6830 style="color:#ABB2BF" > [</span><span data-hk=00000001000000000203b6840 style="color:#E5C07B" >state</span><span data-hk=00000001000000000203b6850 style="color:#ABB2BF" >, </span><span data-hk=00000001000000000203b6860 style="color:#E5C07B" >setState</span><span data-hk=00000001000000000203b6870 style="color:#ABB2BF" >] </span><span data-hk=00000001000000000203b6880 style="color:#56B6C2" >=</span><span data-hk=00000001000000000203b6890 style="color:#61AFEF" > useState</span><span data-hk=00000001000000000203b6900 style="color:#ABB2BF" >(</span><span data-hk=00000001000000000203b6910 style="color:#E06C75" >someProp</span><span data-hk=00000001000000000203b6920 style="color:#ABB2BF" >, [</span><span data-hk=00000001000000000203b6930 style="color:#E06C75" >someProp</span><span data-hk=00000001000000000203b6940 style="color:#ABB2BF" >]);</span></span>
<span data-hk=00000001000000000203b6970 data-line="" ><span data-hk=00000001000000000203b6960 style="color:#ABB2BF" >	...</span></span>
<span data-hk=00000001000000000203b6990 data-line="" ><span data-hk=00000001000000000203b6980 style="color:#ABB2BF" >}</span></span></code></pre></figure>
<p data-hk=00000001000000000203b7050 >There's a lot of precedent to draw from with how dependency arrays for <code data-hk=00000001000000000203b7030 >useMemo</code> and <code data-hk=00000001000000000203b7040 >useEffect</code> work. We'd probably want to inherit the same ESLint warnings and autofixes, and have the React Compiler auto-generate dependencies in the same way.</p>
<p data-hk=00000001000000000203b7070 >Of course, we wouldn't want to fully follow <code data-hk=00000001000000000203b7060 >useEffect</code>'s precedent and have the absence of a dependency array re-create state on each render. A missing dependency array here should behave the same as an empty one, which also means code like this is still perfectly valid:</p>
<figure data-hk=00000001000000000203b7340 data-rehype-pretty-code-figure="" ><pre data-hk=00000001000000000203b7330 style="backgroundColor:#282c34;color:#abb2bf" tabIndex="0" data-language="js" data-theme="one-dark-pro" ><code data-hk=00000001000000000203b7320 data-language="js" data-theme="one-dark-pro" style="display:grid" ><span data-hk=00000001000000000203b7130 data-line="" ><span data-hk=00000001000000000203b7080 style="color:#C678DD" >function</span><span data-hk=00000001000000000203b7090 style="color:#61AFEF" > Component</span><span data-hk=00000001000000000203b7100 style="color:#ABB2BF" >({ </span><span data-hk=00000001000000000203b7110 style="color:#E06C75;fontStyle:italic" >someProp</span><span data-hk=00000001000000000203b7120 style="color:#ABB2BF" > }) {</span></span>
<span data-hk=00000001000000000203b7150 data-line="" data-highlighted-line="" ><span data-hk=00000001000000000203b7140 style="color:#7F848E;fontStyle:italic" >	// No error - we're not deriving state from anything mutable.</span></span>
<span data-hk=00000001000000000203b7270 data-line="" data-highlighted-line="" ><span data-hk=00000001000000000203b7160 style="color:#C678DD" >	const</span><span data-hk=00000001000000000203b7170 style="color:#ABB2BF" > [</span><span data-hk=00000001000000000203b7180 style="color:#E5C07B" >state</span><span data-hk=00000001000000000203b7190 style="color:#ABB2BF" >, </span><span data-hk=00000001000000000203b7200 style="color:#E5C07B" >setState</span><span data-hk=00000001000000000203b7210 style="color:#ABB2BF" >] </span><span data-hk=00000001000000000203b7220 style="color:#56B6C2" >=</span><span data-hk=00000001000000000203b7230 style="color:#61AFEF" > useState</span><span data-hk=00000001000000000203b7240 style="color:#ABB2BF" >(</span><span data-hk=00000001000000000203b7250 style="color:#D19A66" >0</span><span data-hk=00000001000000000203b7260 style="color:#ABB2BF" >);</span></span>
<span data-hk=00000001000000000203b7290 data-line="" ><span data-hk=00000001000000000203b7280 style="color:#ABB2BF" >	...</span></span>
<span data-hk=00000001000000000203b7310 data-line="" ><span data-hk=00000001000000000203b7300 style="color:#ABB2BF" >}</span></span></code></pre></figure>
<p data-hk=00000001000000000203b7370 >I'm not trying to entirely rule out having <code data-hk=00000001000000000203b7350 >useState</code> <em data-hk=00000001000000000203b7360 >not</em> reset when something it depends on changes. You'd still have the option of lying to the dependency array like with other hooks:</p>
<figure data-hk=00000001000000000203b7470 data-rehype-pretty-code-figure="" ><pre data-hk=00000001000000000203b7460 style="backgroundColor:#282c34;color:#abb2bf" tabIndex="0" data-language="javascript" data-theme="one-dark-pro" ><code data-hk=00000001000000000203b7450 data-language="javascript" data-theme="one-dark-pro" style="display:grid" ><span data-hk=00000001000000000203b7390 data-line="" data-highlighted-line="" ><span data-hk=00000001000000000203b7380 style="color:#7F848E;fontStyle:italic" >// eslint-disable-next-line react-hooks/exhaustive-deps</span></span>
<span data-hk=00000001000000000203b7440 data-line="" ><span data-hk=00000001000000000203b7400 style="color:#61AFEF" >useState</span><span data-hk=00000001000000000203b7410 style="color:#ABB2BF" >(</span><span data-hk=00000001000000000203b7420 style="color:#E06C75" >someProp</span><span data-hk=00000001000000000203b7430 style="color:#ABB2BF" >, []);</span></span></code></pre></figure>
<p data-hk=00000001000000000203b7480 >...which in my opinion, is a much simpler escape hatch than what it takes to get the behaviour that's more "correct" today.</p></div><div style="display:none"><!--$-->use_state_should_require_a_dependency_array<!--/--><!--$-->1<!--/-->more:<!--$--><!--/--><!--$--><!--/--></div></div></div><!--!$/e000000--></div><!--$--><script>window.manifest = {"src/routes/(index)/index.tsx?pick=default&pick=$css":{"output":"/_build/assets/index-N0RjzvrQ.js","assets":[{"tag":"link","attrs":{"href":"/_build/assets/web-V5pwFSD5.js","key":"/_build/assets/web-V5pwFSD5.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/all_posts.compile-uYno7xFZ.js","key":"/_build/assets/all_posts.compile-uYno7xFZ.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/routing-BMGDGDqe.js","key":"/_build/assets/routing-BMGDGDqe.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/components-Dc_S2E9h.js","key":"/_build/assets/components-Dc_S2E9h.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/index-N0RjzvrQ.js","key":"/_build/assets/index-N0RjzvrQ.js","rel":"modulepreload"}}]},"src/routes/[...404].tsx?pick=default&pick=$css":{"output":"/_build/assets/_...404_-BPENTFQ-.js","assets":[{"tag":"link","attrs":{"href":"/_build/assets/web-V5pwFSD5.js","key":"/_build/assets/web-V5pwFSD5.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/routing-BMGDGDqe.js","key":"/_build/assets/routing-BMGDGDqe.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/components-Dc_S2E9h.js","key":"/_build/assets/components-Dc_S2E9h.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/_...404_-BPENTFQ-.js","key":"/_build/assets/_...404_-BPENTFQ-.js","rel":"modulepreload"}}]},"src/routes/about.tsx?pick=default&pick=$css":{"output":"/_build/assets/about-XXARsj3C.js","assets":[{"tag":"link","attrs":{"href":"/_build/assets/web-V5pwFSD5.js","key":"/_build/assets/web-V5pwFSD5.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/routing-BMGDGDqe.js","key":"/_build/assets/routing-BMGDGDqe.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/components-Dc_S2E9h.js","key":"/_build/assets/components-Dc_S2E9h.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/about-XXARsj3C.js","key":"/_build/assets/about-XXARsj3C.js","rel":"modulepreload"}}]},"src/routes/client-routing-test/[param].tsx?pick=default&pick=$css":{"output":"/_build/assets/_param_-C935QT2s.js","assets":[{"tag":"link","attrs":{"href":"/_build/assets/web-V5pwFSD5.js","key":"/_build/assets/web-V5pwFSD5.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/routing-BMGDGDqe.js","key":"/_build/assets/routing-BMGDGDqe.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/components-Dc_S2E9h.js","key":"/_build/assets/components-Dc_S2E9h.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/_param_-C935QT2s.js","key":"/_build/assets/_param_-C935QT2s.js","rel":"modulepreload"}}]},"src/routes/posts/___template/index.tsx?pick=default&pick=$css":{"output":"/_build/assets/index-D4bz5Mh2.js","assets":[{"tag":"link","attrs":{"href":"/_build/assets/jsx-runtime-CCakz991.css","key":"/_build/assets/jsx-runtime-CCakz991.css","rel":"stylesheet","fetchPriority":"high"}},{"tag":"link","attrs":{"href":"/_build/assets/web-V5pwFSD5.js","key":"/_build/assets/web-V5pwFSD5.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/all_posts.compile-uYno7xFZ.js","key":"/_build/assets/all_posts.compile-uYno7xFZ.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/routing-BMGDGDqe.js","key":"/_build/assets/routing-BMGDGDqe.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/components-Dc_S2E9h.js","key":"/_build/assets/components-Dc_S2E9h.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/jsx-runtime-OVrRlQkB.js","key":"/_build/assets/jsx-runtime-OVrRlQkB.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/index-D4bz5Mh2.js","key":"/_build/assets/index-D4bz5Mh2.js","rel":"modulepreload"}}]},"src/routes/posts/___template/meta.ts?pick=default&pick=$css":{"output":"/_build/assets/meta-PUbtxr7Y.js","assets":[{"tag":"link","attrs":{"href":"/_build/assets/meta-PUbtxr7Y.js","key":"/_build/assets/meta-PUbtxr7Y.js","rel":"modulepreload"}}]},"src/routes/posts/_how-those-daily-puzzle-games-work/index.tsx?pick=default&pick=$css":{"output":"/_build/assets/index-BRHuU8Sz.js","assets":[{"tag":"link","attrs":{"href":"/_build/assets/jsx-runtime-CCakz991.css","key":"/_build/assets/jsx-runtime-CCakz991.css","rel":"stylesheet","fetchPriority":"high"}},{"tag":"link","attrs":{"href":"/_build/assets/web-V5pwFSD5.js","key":"/_build/assets/web-V5pwFSD5.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/all_posts.compile-uYno7xFZ.js","key":"/_build/assets/all_posts.compile-uYno7xFZ.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/routing-BMGDGDqe.js","key":"/_build/assets/routing-BMGDGDqe.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/components-Dc_S2E9h.js","key":"/_build/assets/components-Dc_S2E9h.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/jsx-runtime-OVrRlQkB.js","key":"/_build/assets/jsx-runtime-OVrRlQkB.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/index-BRHuU8Sz.js","key":"/_build/assets/index-BRHuU8Sz.js","rel":"modulepreload"}}]},"src/routes/posts/_how-those-daily-puzzle-games-work/meta.ts?pick=default&pick=$css":{"output":"/_build/assets/meta-CErcayRg.js","assets":[{"tag":"link","attrs":{"href":"/_build/assets/meta-CErcayRg.js","key":"/_build/assets/meta-CErcayRg.js","rel":"modulepreload"}}]},"src/routes/posts/_how_this_blog_works/index.tsx?pick=default&pick=$css":{"output":"/_build/assets/index-Z36bhAZj.js","assets":[{"tag":"link","attrs":{"href":"/_build/assets/jsx-runtime-CCakz991.css","key":"/_build/assets/jsx-runtime-CCakz991.css","rel":"stylesheet","fetchPriority":"high"}},{"tag":"link","attrs":{"href":"/_build/assets/web-V5pwFSD5.js","key":"/_build/assets/web-V5pwFSD5.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/all_posts.compile-uYno7xFZ.js","key":"/_build/assets/all_posts.compile-uYno7xFZ.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/routing-BMGDGDqe.js","key":"/_build/assets/routing-BMGDGDqe.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/components-Dc_S2E9h.js","key":"/_build/assets/components-Dc_S2E9h.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/jsx-runtime-OVrRlQkB.js","key":"/_build/assets/jsx-runtime-OVrRlQkB.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/preload-helper-ug3pwPZ1.js","key":"/_build/assets/preload-helper-ug3pwPZ1.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/embed_react_component-BqAZ-l4f.js","key":"/_build/assets/embed_react_component-BqAZ-l4f.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/index-Z36bhAZj.js","key":"/_build/assets/index-Z36bhAZj.js","rel":"modulepreload"}}]},"src/routes/posts/_how_this_blog_works/meta.ts?pick=default&pick=$css":{"output":"/_build/assets/meta-BJNXyS_V.js","assets":[{"tag":"link","attrs":{"href":"/_build/assets/meta-BJNXyS_V.js","key":"/_build/assets/meta-BJNXyS_V.js","rel":"modulepreload"}}]},"src/routes/posts/_my-time-with-solid-start/index.tsx?pick=default&pick=$css":{"output":"/_build/assets/index-D1sLiqkO.js","assets":[{"tag":"link","attrs":{"href":"/_build/assets/jsx-runtime-CCakz991.css","key":"/_build/assets/jsx-runtime-CCakz991.css","rel":"stylesheet","fetchPriority":"high"}},{"tag":"link","attrs":{"href":"/_build/assets/web-V5pwFSD5.js","key":"/_build/assets/web-V5pwFSD5.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/all_posts.compile-uYno7xFZ.js","key":"/_build/assets/all_posts.compile-uYno7xFZ.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/routing-BMGDGDqe.js","key":"/_build/assets/routing-BMGDGDqe.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/components-Dc_S2E9h.js","key":"/_build/assets/components-Dc_S2E9h.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/jsx-runtime-OVrRlQkB.js","key":"/_build/assets/jsx-runtime-OVrRlQkB.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/index-D1sLiqkO.js","key":"/_build/assets/index-D1sLiqkO.js","rel":"modulepreload"}}]},"src/routes/posts/_my-time-with-solid-start/meta.ts?pick=default&pick=$css":{"output":"/_build/assets/meta-FfsHJZ1O.js","assets":[{"tag":"link","attrs":{"href":"/_build/assets/meta-FfsHJZ1O.js","key":"/_build/assets/meta-FfsHJZ1O.js","rel":"modulepreload"}}]},"src/routes/posts/_one/index.tsx?pick=default&pick=$css":{"output":"/_build/assets/index-C0H6Tgi1.js","assets":[{"tag":"link","attrs":{"href":"/_build/assets/jsx-runtime-CCakz991.css","key":"/_build/assets/jsx-runtime-CCakz991.css","rel":"stylesheet","fetchPriority":"high"}},{"tag":"link","attrs":{"href":"/_build/assets/web-V5pwFSD5.js","key":"/_build/assets/web-V5pwFSD5.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/all_posts.compile-uYno7xFZ.js","key":"/_build/assets/all_posts.compile-uYno7xFZ.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/routing-BMGDGDqe.js","key":"/_build/assets/routing-BMGDGDqe.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/components-Dc_S2E9h.js","key":"/_build/assets/components-Dc_S2E9h.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/jsx-runtime-OVrRlQkB.js","key":"/_build/assets/jsx-runtime-OVrRlQkB.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/index-C0H6Tgi1.js","key":"/_build/assets/index-C0H6Tgi1.js","rel":"modulepreload"}}]},"src/routes/posts/_one/meta.ts?pick=default&pick=$css":{"output":"/_build/assets/meta-BqrlQWg9.js","assets":[{"tag":"link","attrs":{"href":"/_build/assets/meta-BqrlQWg9.js","key":"/_build/assets/meta-BqrlQWg9.js","rel":"modulepreload"}}]},"src/routes/posts/_two/index.tsx?pick=default&pick=$css":{"output":"/_build/assets/index-9Ac7vWCN.js","assets":[{"tag":"link","attrs":{"href":"/_build/assets/jsx-runtime-CCakz991.css","key":"/_build/assets/jsx-runtime-CCakz991.css","rel":"stylesheet","fetchPriority":"high"}},{"tag":"link","attrs":{"href":"/_build/assets/web-V5pwFSD5.js","key":"/_build/assets/web-V5pwFSD5.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/all_posts.compile-uYno7xFZ.js","key":"/_build/assets/all_posts.compile-uYno7xFZ.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/routing-BMGDGDqe.js","key":"/_build/assets/routing-BMGDGDqe.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/components-Dc_S2E9h.js","key":"/_build/assets/components-Dc_S2E9h.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/jsx-runtime-OVrRlQkB.js","key":"/_build/assets/jsx-runtime-OVrRlQkB.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/index-9Ac7vWCN.js","key":"/_build/assets/index-9Ac7vWCN.js","rel":"modulepreload"}}]},"src/routes/posts/_two/meta.ts?pick=default&pick=$css":{"output":"/_build/assets/meta-DtkNl46x.js","assets":[{"tag":"link","attrs":{"href":"/_build/assets/meta-DtkNl46x.js","key":"/_build/assets/meta-DtkNl46x.js","rel":"modulepreload"}}]},"src/routes/posts/_two/shouldnotappear/meta.ts?pick=default&pick=$css":{"output":"/_build/assets/meta-BAGqRHE7.js","assets":[{"tag":"link","attrs":{"href":"/_build/assets/meta-BAGqRHE7.js","key":"/_build/assets/meta-BAGqRHE7.js","rel":"modulepreload"}}]},"src/routes/posts/use_state_should_require_a_dependency_array/index.tsx?pick=default&pick=$css":{"output":"/_build/assets/index-D432vQR-.js","assets":[{"tag":"link","attrs":{"href":"/_build/assets/index-B0zURUJ_.css","key":"/_build/assets/index-B0zURUJ_.css","rel":"stylesheet","fetchPriority":"high"}},{"tag":"link","attrs":{"href":"/_build/assets/jsx-runtime-CCakz991.css","key":"/_build/assets/jsx-runtime-CCakz991.css","rel":"stylesheet","fetchPriority":"high"}},{"tag":"link","attrs":{"href":"/_build/assets/web-V5pwFSD5.js","key":"/_build/assets/web-V5pwFSD5.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/all_posts.compile-uYno7xFZ.js","key":"/_build/assets/all_posts.compile-uYno7xFZ.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/routing-BMGDGDqe.js","key":"/_build/assets/routing-BMGDGDqe.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/components-Dc_S2E9h.js","key":"/_build/assets/components-Dc_S2E9h.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/jsx-runtime-OVrRlQkB.js","key":"/_build/assets/jsx-runtime-OVrRlQkB.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/preload-helper-ug3pwPZ1.js","key":"/_build/assets/preload-helper-ug3pwPZ1.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/embed_react_component-BqAZ-l4f.js","key":"/_build/assets/embed_react_component-BqAZ-l4f.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/index-D432vQR-.js","key":"/_build/assets/index-D432vQR-.js","rel":"modulepreload"}}]},"src/routes/posts/use_state_should_require_a_dependency_array/meta.ts?pick=default&pick=$css":{"output":"/_build/assets/meta-C8bFo_u0.js","assets":[{"tag":"link","attrs":{"href":"/_build/assets/meta-C8bFo_u0.js","key":"/_build/assets/meta-C8bFo_u0.js","rel":"modulepreload"}}]},"src/routes/test1.tsx?pick=default&pick=$css":{"output":"/_build/assets/test1-BWOy1q5V.js","assets":[{"tag":"link","attrs":{"href":"/_build/assets/web-V5pwFSD5.js","key":"/_build/assets/web-V5pwFSD5.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/test1-BWOy1q5V.js","key":"/_build/assets/test1-BWOy1q5V.js","rel":"modulepreload"}}]},"virtual:$vinxi/handler/client":{"output":"/_build/assets/client-AWm-SvHB.js","assets":[{"tag":"link","attrs":{"href":"/_build/assets/client-BjTaVbS-.css","key":"/_build/assets/client-BjTaVbS-.css","rel":"stylesheet","fetchPriority":"high"}},{"tag":"link","attrs":{"href":"/_build/assets/web-V5pwFSD5.js","key":"/_build/assets/web-V5pwFSD5.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/preload-helper-ug3pwPZ1.js","key":"/_build/assets/preload-helper-ug3pwPZ1.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/routing-BMGDGDqe.js","key":"/_build/assets/routing-BMGDGDqe.js","rel":"modulepreload"}},{"tag":"link","attrs":{"href":"/_build/assets/client-AWm-SvHB.js","key":"/_build/assets/client-AWm-SvHB.js","rel":"modulepreload"}}]}}</script><script type="module" async src="/_build/assets/client-AWm-SvHB.js"></script><!--/--></body></html>